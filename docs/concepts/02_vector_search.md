---
title: "–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤ SQLite"
description: "–ö–∞–∫ sqlite-vec —Ö—Ä–∞–Ω–∏—Ç –∏ –∏—â–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã —Å –∫–æ—Å–∏–Ω—É—Å–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º"
tags: [vector-search, sqlite-vec, cosine, storage, sqlite]
difficulty: beginner
related: [01_embeddings, 03_hybrid_rrf]
---

## –ß—Ç–æ —ç—Ç–æ üìå

**–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** ‚Äî –ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –º–µ–∂–¥—É –∏—Ö –≤–µ–∫—Ç–æ—Ä–∞–º–∏. –ß–µ–º –º–µ–Ω—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ ‚Äî —Ç–µ–º –±–æ–ª—å—à–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ.

**sqlite-vec** ‚Äî C-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è SQLite, –¥–æ–±–∞–≤–ª—è—é—â–µ–µ:

- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã `vec0` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤
- –§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (`vec_distance_cosine`, `vec_distance_l2`)
- BLOB-—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é float32 –º–∞—Å—Å–∏–≤–æ–≤

---

## –ó–∞—á–µ–º –Ω—É–∂–Ω–æ üéØ

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| SQLite –Ω–µ —É–º–µ–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤–µ–∫—Ç–æ—Ä—ã | `vec0` –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ |
| –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è | `vec_distance_cosine()` |
| –ù—É–∂–Ω–∞ –≤–Ω–µ—à–Ω—è—è –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î (Pinecone, Qdrant) | –í—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `.db` |

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: Zero-dependency –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫. –û–¥–∏–Ω SQLite —Ñ–∞–π–ª = –¥–∞–Ω–Ω—ã–µ + –≤–µ–∫—Ç–æ—Ä—ã + FTS –∏–Ω–¥–µ–∫—Å.

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç üîç

```plantuml
@startuml
title –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

database "SQLite database.db" as db {
    rectangle "documents" as main {
        (id)
        (title)
        (content)
        (metadata)
    }
    
    rectangle "documents_vec (vec0)" as vec {
        (id)
        (embedding FLOAT[768])
    }
    
    rectangle "documents_fts (FTS5)" as fts {
        (content)
        (inverted index)
    }
}

main --> vec : "1:1 –ø–æ id"
main --> fts : "FTS –∏–Ω–¥–µ–∫—Å"

note bottom of vec
  BLOB: 768 √ó 4 bytes = 3 KB
  –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
end note

legend right
  –¢—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏:
  - main: –¥–∞–Ω–Ω—ã–µ
  - vec: —Å–µ–º–∞–Ω—Ç–∏–∫–∞
  - fts: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
endlegend
@enduml
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è ‚öôÔ∏è

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|----------|-------------------|
| `vec_distance_cosine` | –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ | **–¢–µ–∫—Å—Ç–æ–≤—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏** |
| `vec_distance_l2` | –ï–≤–∫–ª–∏–¥–æ–≤–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã |
| `vec_distance_l1` | Manhattan distance | –†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã |

**Semantic Core –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `cosine`** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è text embeddings.

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è cosine distance

| –ó–Ω–∞—á–µ–Ω–∏–µ | –°–º—ã—Å–ª |
|----------|-------|
| 0.0 | –ò–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã |
| 0.0 - 0.3 | –û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–µ |
| 0.3 - 0.6 | –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã |
| 0.6 - 1.0 | –†–∞–∑–Ω—ã–µ —Ç–µ–º—ã |
| 1.0 | –û—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω—ã (–Ω–µ —Å–≤—è–∑–∞–Ω—ã) |

---

## SQL-–∑–∞–ø—Ä–æ—Å –ø–æ–∏—Å–∫–∞ üí°

```sql
SELECT 
    main.id,
    main.title,
    vec_distance_cosine(vec.embedding, ?) as distance
FROM documents main
INNER JOIN documents_vec vec ON main.id = vec.id
ORDER BY distance ASC
LIMIT 10;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä `?`** ‚Äî BLOB –≤–µ–∫—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç `embed_query()`).

---

## –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ ‚öôÔ∏è

### Python ‚Üí SQLite BLOB

```python
import numpy as np

vector = np.array([0.1, 0.2, ...], dtype=np.float32)
blob = vector.tobytes()  # ‚Üí bytes –¥–ª—è INSERT
```

### SQLite BLOB ‚Üí Python

```python
blob = cursor.fetchone()[0]
vector = np.frombuffer(blob, dtype=np.float32)
```

**–í–∞–∂–Ω–æ**: –¢–æ–ª—å–∫–æ `float32`! –ù–µ `float64`.

---

## –†–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è üìä

| –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å | –ë–∞–π—Ç –Ω–∞ –≤–µ–∫—Ç–æ—Ä | 10K –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
|-------------|----------------|----------------|
| 768 | 3 KB | 30 MB |
| 1536 | 6 KB | 60 MB |
| 3072 | 12 KB | 120 MB |

**–ö–æ–º–ø–∞–∫—Ç–Ω–æ** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±–∞–∑!

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚öôÔ∏è

### –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ (–±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞)

| –î–æ–∫—É–º–µ–Ω—Ç–æ–≤ | –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ |
|------------|--------------|
| 1,000 | ~10 ms |
| 10,000 | ~50 ms |
| 100,000 | ~300 ms |

**sqlite-vec –Ω–µ –∏–º–µ–µ—Ç HNSW –∏–Ω–¥–µ–∫—Å–∞** (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç pgvector). –î–ª—è >100K –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.

### –ö–æ–≥–¥–∞ sqlite-vec –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

| –†–∞–∑–º–µ—Ä –±–∞–∑—ã | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------------|--------------|
| < 10K | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ |
| 10K - 100K | ‚úÖ –ü—Ä–∏–µ–º–ª–µ–º–æ |
| > 100K | ‚ö†Ô∏è –†–∞—Å—Å–º–æ—Ç—Ä–∏ pgvector |

---

## –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã ‚ö†Ô∏è

| –ù—é–∞–Ω—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å | –í—Å–µ –≤–µ–∫—Ç–æ—Ä—ã –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–Ω–æ–π –¥–ª–∏–Ω—ã |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è | `sqlite_vec.load(conn)` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ |
| WAL mode | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è concurrent reads |
| –ù–µ—Ç partial index | –ù–µ–ª—å–∑—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤ |

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Semantic Core üìã

Semantic Core –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å sqlite-vec —á–µ—Ä–µ–∑ `BaseVectorStore`:

```python
class BaseVectorStore(ABC):
    @abstractmethod
    def search(
        self,
        query_vector: Optional[Any] = None,
        query_text: Optional[str] = None,
        filters: Optional[dict] = None,
        limit: int = 10,
        mode: str = "hybrid",  # vector | fts | hybrid
        k: int = 60,  # RRF –ø–∞—Ä–∞–º–µ—Ç—Ä
    ) -> list[SearchResult]: ...
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `PeeweeVectorStore` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `vec_distance_cosine` –≤–Ω—É—Ç—Ä–∏.

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã üîó

- [–≠–º–±–µ–¥–¥–∏–Ω–≥–∏](01_embeddings.md) ‚Äî –∫–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤–µ–∫—Ç–æ—Ä—ã
- [–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ RRF](03_hybrid_rrf.md) ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å FTS5
- [Interfaces Reference](../reference/interfaces.md) ‚Äî –º–µ—Ç–æ–¥—ã BaseVectorStore
