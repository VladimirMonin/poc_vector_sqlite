---
title: "RAG Chat"
description: "Интерактивный чат с базой знаний через RAG"
tags: ["rag", "chat", "repl", "interactive"]
difficulty: "intermediate"
prerequisites: ["quickstart", "cli-usage"]
---

# RAG Chat 💬

> Интерактивный чат с вашей базой знаний.

---

## Что получим 🎯

- Работающий RAG-чат в терминале
- Знание slash-команд для управления
- Настройка истории и контекста

---

## Запуск чата 🚀

```bash
# Базовый запуск
semantic chat

# С настройками модели
semantic chat --model gemini-2.5-pro

# С увеличенным контекстом
semantic chat --context 10

# Другой режим поиска
semantic chat --search vector
```

---

## Интерфейс чата 🖥️

```
┌─────────────────────────────────────────────┐
│  🧠 Semantic Chat                            │
│  Model: gemini-2.5-flash                     │
│  Context: 5 chunks | History: до 10 сообщ.  │
├─────────────────────────────────────────────┤
│                                              │
│  You: Как работает гибридный поиск?         │
│                                              │
│  🤖: Гибридный поиск объединяет...          │
│                                              │
│  📚 Sources:                                 │
│  [1] docs/architecture.md (0.92)            │
│  [2] README.md (0.85)                        │
│                                              │
├─────────────────────────────────────────────┤
│  You: _                                      │
└─────────────────────────────────────────────┘
```

---

## Slash-команды ⚡

Введите `/` для доступа к командам:

### Базовые

| Команда | Описание |
|---------|----------|
| `/help` | Справка по всем командам |
| `/quit` или `/q` | Выход из чата |
| `/clear` | Очистить историю |
| `/tokens` | Статистика использования токенов |
| `/history` | Показать историю сообщений |

### Поиск

| Команда | Описание |
|---------|----------|
| `/search <query>` | Поиск без генерации ответа |
| `/sources` | Источники последнего ответа |
| `/source <N>` | Показать содержимое источника N |
| `/mode [vector\|fts\|hybrid]` | Показать/сменить режим поиска |

### Настройки

| Команда | Описание |
|---------|----------|
| `/model [name]` | Показать/сменить модель LLM |
| `/context [N]` | Показать/сменить количество чанков |
| `/compress` | Сжать историю через LLM |

---

## Режимы поиска 🔍

```bash
# Векторный — семантический поиск
semantic chat --search vector

# FTS — точное совпадение слов
semantic chat --search fts

# Гибридный — RRF объединение (default)
semantic chat --search hybrid
```

Смена в чате:

```
You: /mode vector
🔄 Режим поиска: vector
```

---

## Управление историей 📜

### По количеству сообщений (default)

```bash
semantic chat --history-limit 20
```

Хранит последние 20 сообщений.

### По токенам

```bash
semantic chat --token-budget 10000
```

Хранит историю до 10k токенов, старые сообщения удаляются.

### Адаптивное сжатие

```bash
semantic chat --compress-at 30000 --compress-target 10000
```

Когда история превысит 30k токенов, LLM сожмёт её до 10k.

### Без истории

```bash
semantic chat --no-history
```

Каждый вопрос — независимый, без контекста предыдущих.

---

## Chunks vs Full Docs ⚖️

```bash
# Чанки (default) — точнее, меньше токенов
semantic chat

# Полные документы — больше контекста
semantic chat --full-docs
```

| Режим | Когда использовать |
|-------|-------------------|
| Chunks | Точные вопросы, экономия токенов |
| Full Docs | Нужен широкий контекст документа |

---

## Настройка генерации 🎛️

```bash
# Температура (креативность)
semantic chat --temperature 0.3    # Более точные ответы
semantic chat --temperature 1.2    # Более креативные

# Лимит токенов ответа
semantic chat --max-tokens 500

# Скрыть источники
semantic chat --no-sources
```

---

## Примеры сценариев 📝

### Изучение проекта

```bash
semantic chat --context 10 --model gemini-2.5-pro
```

```
You: Объясни архитектуру проекта
You: Какие основные классы используются?
You: Покажи примеры использования RAGEngine
```

### Быстрый поиск

```bash
semantic chat --no-history --search vector
```

```
You: /search аутентификация JWT
You: /source 1
```

### Длинная сессия

```bash
semantic chat --compress-at 50000 --history-limit 100
```

История автоматически сжимается при достижении лимита.

---

## Частые проблемы ⚠️

| Проблема | Решение |
|----------|---------|
| `No context found` | База пуста, запустите `ingest` |
| `Rate limit exceeded` | Уменьшите `--context` или подождите |
| `Model not found` | Проверьте название модели |
| Медленные ответы | Используйте `gemini-2.5-flash` |

---

## Горячие клавиши ⌨️

| Клавиша | Действие |
|---------|----------|
| `Ctrl+C` | Прервать генерацию |
| `Ctrl+D` | Выход из чата |
| `↑` / `↓` | История ввода |
| `Tab` | Автодополнение slash-команд |

---

## Следующие шаги 🔗

| Гайд | Что узнаете |
|------|-------------|
| [Model Configuration](model-configuration.md) | Выбор моделей LLM |
| [RAG Concept](../../concepts/08_rag_architecture.md) | Как работает RAG |
| [Chat History](../../concepts/09_observability.md) | Логирование чата |
