–í–æ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **–§–∞–∑—ã 6.5**.

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ê–≥–µ–Ω—Ç—É –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∫ –¥–µ–π—Å—Ç–≤–∏—é. –û–Ω –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–µ –§–∞–∑—ã 6.2 (–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ú–µ–¥–∏–∞) –∏ –§–∞–∑—ã 4 (Markdown –ü–∞—Ä—Å–µ—Ä).

-----

# üó∫Ô∏è Phase 6.5: Audio & Video in Markdown (Links Only)

**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏ Markdown-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (`[Link](file.mp3)`) –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç, —Å–æ—Ö—Ä–∞–Ω—è—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞.

**–ü—Ä–∏–Ω—Ü–∏–ø:**

1. –ù–∏–∫–∞–∫–æ–≥–æ HTML-–ø–∞—Ä—Å–∏–Ω–≥–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º `<video>`, `<audio>` —Ç–µ–≥–∏).
2. –†–∞–±–æ—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º —Å—Å—ã–ª–æ–∫ `[]()` –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π `![]()`.
3. –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è **—Å—Ç—Ä–æ–≥–æ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞**.

-----

## ‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏ (Post-Analysis)

### –§–æ—Ä–º–∞—Ç—ã Gemini API

**Audio (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ):**
- WAV (`audio/wav`)
- MP3 (`audio/mp3`, `audio/mpeg`)
- AIFF (`audio/aiff`) ‚Üê –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è!
- AAC (`audio/aac`)
- OGG Vorbis (`audio/ogg`)
- FLAC (`audio/flac`)

**‚ö†Ô∏è M4A –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é!** –§–∞–π–ª—ã `.m4a` (audio/x-m4a) —Ç—Ä–µ–±—É—é—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ OGG —á–µ—Ä–µ–∑ `optimize_audio_to_bytes()`.

**Video:** Gemini –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é. –ù–∞—à `GeminiVideoAnalyzer` –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞–¥—Ä—ã + –∞—É–¥–∏–æ –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äî —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ markdown-it-py

–¢–æ–∫–µ–Ω—ã —Å—Å—ã–ª–æ–∫ ‚Äî —ç—Ç–æ **—Ç—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–æ–∫–µ–Ω–∞**:
```
1. link_open  (attrs = [("href", "file.mp3")])
2. text       (content = "Link Text")
3. link_close
```

–¢–æ–∫–µ–Ω `image` ‚Äî **–æ–¥–∏–Ω —Ç–æ–∫–µ–Ω** —Å `attrGet("src")` –∏ `content` (alt-—Ç–µ–∫—Å—Ç).

### –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)

- `MediaQueueProcessor._route_and_analyze()` ‚Äî —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ MIME-—Ç–∏–ø—É —É–∂–µ –≥–æ—Ç–æ–≤!
- `is_audio_supported()`, `is_video_supported()` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è MIME-—Ç–∏–ø–æ–≤

-----

## üì¶ 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –î–æ–º–µ–Ω–∞ (`domain/chunk.py`)

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —á–∞–Ω–∫–æ–≤ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `ChunkType` (Enum):**

* –î–æ–±–∞–≤–∏—Ç—å `AUDIO_REF` ("audio\_ref") ‚Äî –°—Å—ã–ª–∫–∞ –Ω–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª.
* –î–æ–±–∞–≤–∏—Ç—å `VIDEO_REF` ("video\_ref") ‚Äî –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ—Ñ–∞–π–ª.

*(–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ: TEXT, CODE, TABLE, IMAGE\_REF)*

-----

## ‚öôÔ∏è 2. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –ü–∞—Ä—Å–µ—Ä–∞ (`processing/parsers/markdown_parser.py`)

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º `MarkdownNodeParser` –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ –≤ —Å—Å—ã–ª–∫–∞—Ö.

### –°–ø–∏—Å–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (Case Insensitive)

* **AUDIO\_EXT:** `.mp3`, `.wav`, `.ogg`, `.flac`, `.aac`, `.aiff`
* **VIDEO\_EXT:** `.mp4`, `.mov`, `.avi`, `.mkv`, `.webm`

> ‚ö†Ô∏è `.m4a` –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∏—Å–∫–ª—é—á—ë–Ω ‚Äî Gemini –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é.
> –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –¥–æ–±–∞–≤–∏—Ç—å —Å –ø–æ–º–µ—Ç–∫–æ–π "requires conversion".

### –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤

**–í–∞–∂–Ω–æ:** –°—Å—ã–ª–∫–∏ (`link_open`) –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (`image`) –ø–∞—Ä—Å—è—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É!

1. **–î–ª—è —Å—Å—ã–ª–æ–∫ (`[–¢–µ–∫—Å—Ç](url)`):**

      * –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º `link_open` —Ç–æ–∫–µ–Ω, –∏–∑–≤–ª–µ–∫–∞–µ–º `href` –∏–∑ attrs.
      * –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö `text` —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ `link_close`.
      * –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (case-insensitive).
      * –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `AUDIO_EXT` ‚Üí –°–æ–∑–¥–∞–µ–º `ParsingSegment(AUDIO_REF)`.
      * –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `VIDEO_EXT` ‚Üí –°–æ–∑–¥–∞–µ–º `ParsingSegment(VIDEO_REF)`.
      * *–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:* `path` = href, `alt` = –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç.

2. **–î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`![Alt](url)`):**

      * *–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:* –°–æ–∑–¥–∞–µ—Ç `IMAGE_REF`.
      * *–ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ. –ï—Å–ª–∏ —Ç–∞–º –≤–∏–¥–µ–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `![Preview](video.mp4)`), —Ç–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è—Ç—å —Ç–∏–ø –Ω–∞ `VIDEO_REF`.

-----

## ‚úÇÔ∏è 3. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –°–ø–ª–∏—Ç—Ç–µ—Ä–∞ (`processing/splitters/smart_splitter.py`)

–£—á–∏–º `SmartSplitter` –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Å–ª–∏–ø–∞–ª–∏—Å—å —Å —Ç–µ–∫—Å—Ç–æ–º.

**–õ–æ–≥–∏–∫–∞:**
–í —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏—è –¥–ª—è `AUDIO_REF` –∏ `VIDEO_REF` (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å `IMAGE_REF`).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```python
MEDIA_TYPES = {ChunkType.IMAGE_REF, ChunkType.AUDIO_REF, ChunkType.VIDEO_REF}

if segment.segment_type in MEDIA_TYPES:
    # flush buffer + create media chunk
```

1. **Flush Text:** –ï—Å–ª–∏ –ø—Ä–∏—à–µ–ª –º–µ–¥–∏–∞-—Å–µ–≥–º–µ–Ω—Ç ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –Ω–∞–∫–æ–ø–∏–≤—à–∏–π—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±—É—Ñ–µ—Ä –≤ —á–∞–Ω–∫.
2. **Create Chunk:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —á–∞–Ω–∫ –¥–ª—è –º–µ–¥–∏–∞.
      * `chunk_type`: `AUDIO_REF` –∏–ª–∏ `VIDEO_REF`.
      * `content`: –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É (–∏–ª–∏ alt-—Ç–µ–∫—Å—Ç, –∫–∞–∫ placeholder).
      * `metadata`: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (`headers`) –∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É.

-----

## üîó 4. –î–æ—Ä–∞–±–æ—Ç–∫–∞ Enricher (`processing/enrichers/markdown_assets.py`)

`MarkdownAssetEnricher` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ù—É–∂–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `get_context()` ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ —á–∞–Ω–∫–∞ (—á–∏—Ç–∞–µ—Ç headers, –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ—Å–µ–¥–µ–π)
- `enrich()` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ `IMAGE_REF`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ `enrich()`:**
```python
MEDIA_TYPES = {ChunkType.IMAGE_REF, ChunkType.AUDIO_REF, ChunkType.VIDEO_REF}

media_chunks = [c for c in chunks if c.chunk_type in MEDIA_TYPES]
```

2. **–ú–µ—Ç–æ–¥ `to_media_requests()` –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** ‚Äî –µ–≥–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —á–∞–Ω–∫–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `MediaType` –Ω–∞ –æ—Å–Ω–æ–≤–µ `chunk.chunk_type`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ `MediaRequest` —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

-----

## üéØ 5. –î–æ—Ä–∞–±–æ—Ç–∫–∞ Context Strategy (`processing/context/hierarchical_strategy.py`)

–î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ç–∫–∏ –¥–ª—è `AUDIO_REF` –∏ `VIDEO_REF` –≤ `form_vector_text()`.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ï—Å—Ç—å –≤–µ—Ç–∫–∞ –¥–ª—è `IMAGE_REF` (enriched/non-enriched).

**–î–æ–±–∞–≤–∏—Ç—å:**

```python
elif chunk.chunk_type == ChunkType.AUDIO_REF:
    if headers:
        parts.append(f"Section: {breadcrumbs}")
    
    if chunk.metadata.get("_enriched"):
        parts.append("Type: Audio")
        parts.append(f"Transcription: {chunk.content}")
        # keywords, participants, action_items...
    else:
        parts.append("Type: Audio Reference")
        alt = chunk.metadata.get("alt", "")
        if alt:
            parts.append(f"Description: {alt}")
        parts.append(f"Source: {chunk.content}")

elif chunk.chunk_type == ChunkType.VIDEO_REF:
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ Type: Video
```

-----

## üéπ 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Pipeline (`pipeline.py`)

–û–±–Ω–æ–≤–ª—è–µ–º `SemanticCore` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ audio/video –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤.

### 6.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```python
def __init__(
    self,
    ...
    image_analyzer: Optional["GeminiImageAnalyzer"] = None,
    audio_analyzer: Optional["GeminiAudioAnalyzer"] = None,  # NEW
    video_analyzer: Optional["GeminiVideoAnalyzer"] = None,  # NEW
    ...
)
```

### 6.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `_enrich_media_chunks()`

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ `IMAGE_REF`, –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ `image_analyzer`.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä:
```python
MEDIA_TYPES = {ChunkType.IMAGE_REF, ChunkType.AUDIO_REF, ChunkType.VIDEO_REF}

for chunk in chunks:
    if chunk.chunk_type not in MEDIA_TYPES:
        continue
```

2. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ —Ç–∏–ø—É:
```python
if chunk.chunk_type == ChunkType.IMAGE_REF:
    result = self.image_analyzer.analyze(request)
elif chunk.chunk_type == ChunkType.AUDIO_REF:
    if self.audio_analyzer is None:
        continue  # skip if not configured
    result = self.audio_analyzer.analyze(request)
elif chunk.chunk_type == ChunkType.VIDEO_REF:
    if self.video_analyzer is None:
        continue
    result = self.video_analyzer.analyze(request, config)
```

> **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MediaQueueProcessor._route_and_analyze()` ‚Äî —Ç–∞–º —Ä–æ—É—Ç–∏–Ω–≥ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω!

-----

## üß™ 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests

1. **`test_chunk_type_enum`** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `AUDIO_REF`, `VIDEO_REF`
2. **`test_parser_audio_links`** ‚Äî `[Audio](file.mp3)` ‚Üí `AUDIO_REF`
3. **`test_parser_video_links`** ‚Äî `[Video](file.mp4)` ‚Üí `VIDEO_REF`
4. **`test_parser_image_with_video_ext`** ‚Äî `![Alt](video.mp4)` ‚Üí `VIDEO_REF` (–Ω–µ IMAGE_REF!)
5. **`test_splitter_isolates_audio`** ‚Äî –∞—É–¥–∏–æ-—á–∞–Ω–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
6. **`test_splitter_isolates_video`** ‚Äî –≤–∏–¥–µ–æ-—á–∞–Ω–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
7. **`test_context_strategy_audio`** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è AUDIO_REF
8. **`test_context_strategy_video`** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è VIDEO_REF

### Integration Tests

1. **`test_markdown_with_audio_e2e`** ‚Äî –ø–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å –∞—É–¥–∏–æ
2. **`test_markdown_with_video_e2e`** ‚Äî –ø–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å –≤–∏–¥–µ–æ
3. **`test_mixed_media_markdown`** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç —Å image + audio + video

-----

## ‚úÖ –ò—Ç–æ–≥ –§–∞–∑—ã 6.5 (User Experience)

**–í—Ö–æ–¥:** –§–∞–π–ª `lecture.md`:

```markdown
# –õ–µ–∫—Ü–∏—è –ø–æ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
–í–æ—Ç –∑–∞–ø–∏—Å—å –ø–µ—Ä–≤–æ–π —á–∞—Å—Ç–∏:
[–ê—É–¥–∏–æ](recordings/part1.mp3)

–ê –≤–æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã:
![–î–µ–º–æ](screencasts/demo.mp4)
```

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. –ü–∞—Ä—Å–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç `.mp3` –∏ `.mp4`.
2. –°–æ–∑–¥–∞–µ—Ç —á–∞–Ω–∫–∏ `AUDIO_REF` –∏ `VIDEO_REF` —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∑–∞–≥–æ–ª–æ–≤–∫—É "–õ–µ–∫—Ü–∏—è –ø–æ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ".
3. –ü–∞–π–ø–ª–∞–π–Ω –≤—ã–∑—ã–≤–∞–µ—Ç `GeminiAudioAnalyzer` –∏ `GeminiVideoAnalyzer`.
4. Gemini —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç —Ä–µ—á—å –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ.

**–†–µ–∑—É–ª—å—Ç–∞—Ç (–ü–æ–∏—Å–∫):**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—â–µ—Ç: *"—á—Ç–æ –≥–æ–≤–æ—Ä–∏–ª–∏ –ø—Ä–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã"* -\> –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —á–∞–Ω–∫ `AUDIO_REF`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –µ–≥–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –µ—Å—Ç—å —ç—Ç–æ —Å–ª–æ–≤–æ.
