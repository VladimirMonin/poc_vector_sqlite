# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –û—Ç—á—ë—Ç: Phase 9.0 ‚Äî Core RAG Engine

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–µ—Ç–∫–∞:** `phase_9`  
**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025

---

## 1. –¶–µ–ª—å —Ñ–∞–∑—ã

Phase 9.0 —Å–æ–∑–¥–∞—ë—Ç **–±–∞–∑–æ–≤—ã–π RAG Engine** ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç–≤–µ—Ç–æ–≤. –ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–§–∞–∑–∞ 8) –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç **–∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã** –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–µ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

**–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ API)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Gemini API
- RAG Engine: –ø–æ–∏—Å–∫ ‚Üí —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- CLI –∫–æ–º–∞–Ω–¥–∞ `semantic chat` –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –í—ã–±–æ—Ä –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ –∏ –ø–æ–ª–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 2.1 –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è LLM –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

- **–ß–∞–Ω–∫–∏** ‚Äî —Ç–æ—á–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø–æ–∏—Å–∫–æ–º
- **–ü–æ–ª–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** ‚Äî –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —á–∞–Ω–∫

**–ê–Ω–∞–ª–∏–∑ trade-offs:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ß–∞–Ω–∫–∏ | –ü–æ–ª–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã |
|----------|-------|------------------|
| –¢–æ–∫–µ–Ω—ã | ~2.5k (5 —á–∞–Ω–∫–æ–≤ √ó 500 —Å–∏–º–≤–æ–ª–æ–≤) | ~10-50k |
| –¢–æ—á–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–µ | –°—Ä–µ–¥–Ω—è—è ‚Äî –º–Ω–æ–≥–æ —à—É–º–∞ |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | –ü–æ–ª–Ω—ã–π |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | $ | $$$ |
| Use case | FAQ, —Ç–æ—á–µ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã | –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è, –∞–Ω–∞–ª–∏–∑ |

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º **—á–∞–Ω–∫–∏** (–≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º), —Å –æ–ø—Ü–∏–µ–π `--full-docs` –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

### 2.2 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞

–í Phase 9.0 –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ **–Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏** ‚Äî –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ:

- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ß—ë—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞: –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å ‚Üí –æ–¥–∏–Ω –ø–æ–∏—Å–∫ ‚Üí –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç
- –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ Phase 9.1

### 2.3 Lazy initialization –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

CLI –∫–æ–º–∞–Ω–¥–∞ `chat` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é:

1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–ø–∞—Ä—Å–∏–Ω–≥ –æ–ø—Ü–∏–π)
2. SemanticCore —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
3. LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

–≠—Ç–æ —Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É –∏–∑ Phase 8 –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ `--help`.

---

## 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 3.1 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å BaseLLMProvider

**–§–∞–π–ª:** `semantic_core/interfaces/llm.py`

–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ª—é–±–æ–≥–æ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

- **–ú–µ—Ç–æ–¥ `generate()`** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º system_prompt
- **Property `model_name`** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **DTO `GenerationResult`** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–æ–≤

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è GenerationResult:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `text` | str | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç |
| `model` | str | –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ |
| `input_tokens` | Optional[int] | –¢–æ–∫–µ–Ω—ã –≤—Ö–æ–¥–∞ |
| `output_tokens` | Optional[int] | –¢–æ–∫–µ–Ω—ã –≤—ã—Ö–æ–¥–∞ |
| `finish_reason` | Optional[str] | –ü—Ä–∏—á–∏–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (STOP, MAX_TOKENS) |

**Property `total_tokens`** –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—É–º–º—É input + output, –≤–æ–∑–≤—Ä–∞—â–∞—è None –µ—Å–ª–∏ –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö –Ω–µ —É–∫–∞–∑–∞–Ω.

### 3.2 GeminiLLMProvider

**–§–∞–π–ª:** `semantic_core/infrastructure/llm/gemini.py`

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è Gemini API:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `google-genai` SDK (—Ç–æ—Ç –∂–µ, —á—Ç–æ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `system_instruction` —á–µ—Ä–µ–∑ `GenerateContentConfig`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ `response.usage_metadata`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `trace_ai()` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ AI-–≤—ã–∑–æ–≤–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ types.GenerateContentConfig:**
   - `temperature` ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å (0.0-2.0)
   - `max_output_tokens` ‚Äî –ª–∏–º–∏—Ç –æ—Ç–≤–µ—Ç–∞
   - `system_instruction` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ `RuntimeError`
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–∏–ø –æ—à–∏–±–∫–∏ –∏ –º–æ–¥–µ–ª—å —á–µ—Ä–µ–∑ `logger.error()`

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ AI –≤—ã–∑–æ–≤–æ–≤:**
   - `trace_ai()` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç prompt preview, response preview, —Ç–æ–∫–µ–Ω—ã
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞—Ç—Ä–∞—Ç –∏ –æ—Ç–ª–∞–¥–∫–∏

### 3.3 SemanticCore.search_chunks()

**–§–∞–π–ª:** `semantic_core/pipeline.py`

–î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–∫—Å–∏-–º–µ—Ç–æ–¥ –¥–ª—è –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:

- –í—ã–∑—ã–≤–∞–µ—Ç `store.search_chunks()` –Ω–∞–ø—Ä—è–º—É—é
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è vector/hybrid —Ä–µ–∂–∏–º–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `chunk_type_filter` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø—É —á–∞–Ω–∫–∞

**–ó–∞—á–µ–º –ø—Ä–æ–∫—Å–∏, –∞ –Ω–µ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ store?**

- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ API: `core.search()` –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, `core.search_chunks()` –¥–ª—è —á–∞–Ω–∫–æ–≤
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è: embedder —Å–∫—Ä—ã—Ç –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π logger

### 3.4 RAGEngine

**–§–∞–π–ª:** `semantic_core/core/rag.py`

–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä RAG-–ø–∞–π–ø–ª–∞–π–Ω–∞:

**–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:**

- `core: SemanticCore` ‚Äî –¥–ª—è –ø–æ–∏—Å–∫–∞
- `llm: BaseLLMProvider` ‚Äî –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `context_chunks: int = 5` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- `system_prompt: Optional[str]` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

**–ú–µ—Ç–æ–¥ `ask()`:**

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è** ‚Äî –ø—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `ValueError`
2. **Retrieval** ‚Äî `search_chunks()` –∏–ª–∏ `search()` (full_docs)
3. **Context building** ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
4. **Generation** ‚Äî –≤—ã–∑–æ–≤ LLM —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
5. **Return** ‚Äî `RAGResult` —Å –æ—Ç–≤–µ—Ç–æ–º –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

**–î–≤–∞ –º–µ—Ç–æ–¥–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**

| –ú–µ—Ç–æ–¥ | –†–µ–∂–∏–º | –ò—Å—Ç–æ—á–Ω–∏–∫ | –§–æ—Ä–º–∞—Ç |
|-------|-------|----------|--------|
| `_build_chunks_context()` | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | ChunkResult | `[1] title [type] (score)\ncontent` |
| `_build_full_docs_context()` | full_docs=True | SearchResult | `[1] source (score)\ncontent` |

**–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

```
You are a helpful assistant that answers based on provided context.
IMPORTANT RULES:
1. Answer ONLY based on CONTEXT below
2. If no relevant info, say so
3. Be concise and accurate
4. Format in Markdown
5. Cite sources properly

CONTEXT:
{context}
```

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:**

- –ï—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç `{context}` ‚Äî –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ò–Ω–∞—á–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —á–µ—Ä–µ–∑ `\n\nCONTEXT:\n`

### 3.5 CLI –∫–æ–º–∞–Ω–¥–∞ chat

**–§–∞–π–ª:** `semantic_core/cli/commands/chat.py`

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π REPL –¥–ª—è RAG-—á–∞—Ç–∞:

**–û–ø—Ü–∏–∏:**

| –û–ø—Ü–∏—è | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | Default |
|-------|------------|----------|---------|
| `--model` | `-m` | –ú–æ–¥–µ–ª—å LLM | gemini-2.0-flash |
| `--context` | `-c` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ | 5 |
| `--search` | `-s` | –†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ | hybrid |
| `--temperature` | `-t` | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | 0.7 |
| `--sources/--no-sources` | ‚Äî | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ | True |
| `--max-tokens` | ‚Äî | –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç–≤–µ—Ç–∞ | None |
| `--full-docs` | ‚Äî | –ü–æ–ª–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã | False |

**–¶–∏–∫–ª REPL:**

1. –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
2. –û–∂–∏–¥–∞—Ç—å –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ exit/quit/q
4. –í—ã–ø–æ–ª–Ω–∏—Ç—å `rag.ask()` —Å —Å–ø–∏–Ω–Ω–µ—Ä–æ–º
5. –í—ã–≤–µ—Å—Ç–∏ –æ—Ç–≤–µ—Ç –≤ Markdown
6. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)
7. –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤
8. Repeat

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**

–§—É–Ω–∫—Ü–∏—è `_show_sources()` –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤:

- `full_docs=False` ‚Üí `ChunkResult.parent_doc_title`
- `full_docs=True` ‚Üí `SearchResult.document.metadata["source"]`

---

## 4. –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 4.1 –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å SearchResult –∏ ChunkResult

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ `source.content` –ø–æ–ª—É—á–∞–ª–∏ `AttributeError`.

**–ü—Ä–∏—á–∏–Ω–∞:** `SearchResult` —Å–æ–¥–µ—Ä–∂–∏—Ç `Document`, –∞ –Ω–µ –ø—Ä—è–º–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç:

- `SearchResult.document.content` ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- `ChunkResult.content` ‚Äî property –¥–ª—è `chunk.content`

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–¥–µ–ª–∏—Ç—å –º–µ—Ç–æ–¥—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

- `_build_chunks_context()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `ChunkResult`
- `_build_full_docs_context()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `SearchResult`

**–£—Ä–æ–∫:** –ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –≤–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö.

### 4.2 –ü—Ä–æ–±–ª–µ–º–∞: trace_ai() —Å–∏–≥–Ω–∞—Ç—É—Ä–∞

**–°–∏–º–ø—Ç–æ–º:** `TypeError: trace_ai() missing required argument 'prompt'`

**–ü—Ä–∏—á–∏–Ω–∞:** –í—ã–∑—ã–≤–∞–ª–∏ `trace_ai(operation=..., model=..., ...)` —Å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏, –Ω–æ –º–µ—Ç–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π `prompt`.

**–ê–Ω–∞–ª–∏–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã:**

```python
def trace_ai(
    self,
    prompt: str,                    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π
    response: str | None = None,    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π
    *,
    model: str | None = None,       # Keyword-only
    tokens_in: int | None = None,
    tokens_out: int | None = None,
    ...
)
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `prompt` –∏ `response` –∫–∞–∫ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ:

```python
logger.trace_ai(
    prompt=prompt_preview,      # –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π
    response=response_preview,  # –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π
    model=self._model,          # Keyword
    tokens_in=input_tokens,
    tokens_out=output_tokens,
    duration_ms=latency_ms,
)
```

### 4.3 –ü—Ä–æ–±–ª–µ–º–∞: SemanticCore –Ω–µ –∏–º–µ–ª search_chunks()

**–°–∏–º–ø—Ç–æ–º:** `AttributeError: 'SemanticCore' object has no attribute 'search_chunks'`

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ `search_chunks()` –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ `BaseVectorStore`, –Ω–æ –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `SemanticCore`.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–∫—Å–∏-–º–µ—Ç–æ–¥ –≤ `pipeline.py`:

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ (–∫–∞–∫ –≤ `search()`)
- –í—ã–∑–æ–≤ `store.search_chunks()` —Å –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –í–æ–∑–≤—Ä–∞—Ç `list[ChunkResult]`

### 4.4 –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

**–°–∏–º–ø—Ç–æ–º:** –¢–µ—Å—Ç `test_build_chunks_context_long_title` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏–ª ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±—ã–ª –∫–æ—Ä–æ—á–µ 50 —Å–∏–º–≤–æ–ª–æ–≤:

```
"/very/long/path/to/some/deeply/nested/file.md"  # 46 chars
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–ª–∏–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
"/very/long/path/to/some/deeply/nested/document/file/with/too/many/parts.md"
```

---

## 5. –î–∏–∑–∞–π–Ω-—Ä–µ—à–µ–Ω–∏—è –∏ trade-offs

### 5.1 –ó–∞—á–µ–º –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞?

**–†–µ–∂–∏–º chunks (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**

- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
- –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (5 —á–∞–Ω–∫–æ–≤ ‚âà 2.5k)
- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–µ

**–†–µ–∂–∏–º full_docs (--full-docs):**

- –î–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –î–æ—Ä–æ–∂–µ, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞. –û—Ç–≤–µ—Ä–≥–Ω—É—Ç–æ –∏–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏.

### 5.2 –ó–∞—á–µ–º RAGResult —Å–æ–¥–µ—Ä–∂–∏—Ç Union[ChunkResult, SearchResult]?

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `full_docs`, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**

1. **–î–≤–∞ —Ä–∞–∑–Ω—ã—Ö DTO** ‚Äî `RAGChunksResult` –∏ `RAGDocsResult`
2. **Union type** ‚Äî `sources: Union[list[ChunkResult], list[SearchResult]]`
3. **–û–±—â–∏–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å** ‚Äî `BaseSearchResult`

**–í—ã–±–æ—Ä:** Union type —Å —Ñ–ª–∞–≥–æ–º `full_docs: bool` –≤ RAGResult.

**–ü—Ä–∏—á–∏–Ω–∞:**

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∏–ø–∞—Ö
- –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `result.full_docs` –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ
- –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å SearchResult/ChunkResult

### 5.3 –ü–æ—á–µ–º—É –Ω–µ async?

RAGEngine –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API:

- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–∏–º `SemanticCore.search_chunks()`
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏
- CLI REPL –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π

**Async RAG** –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –¥–ª—è Phase 9.2 (streaming responses).

---

## 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 6.1 –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Unit-—Ç–µ—Å—Ç—ã —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π:**

- MockLLMProvider ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- MagicMock –¥–ª—è SemanticCore ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ search/search_chunks
- –§–∏–∫—Å—Ç—É—Ä—ã —Å –≥–æ—Ç–æ–≤—ã–º–∏ ChunkResult –∏ SearchResult

### 6.2 –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–æ–≤

**RAGEngine (24 —Ç–µ—Å—Ç–∞):**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Å—Ç—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-------|----------|
| GenerationResult | 3 | –°–æ–∑–¥–∞–Ω–∏–µ, —Ç–æ–∫–µ–Ω—ã, total_tokens |
| RAGResult | 3 | Chunks mode, full_docs mode, no sources |
| RAGEngine init | 1 | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ |
| ask() | 7 | Basic, full_docs, modes, temperature, max_tokens, empty query, no sources |
| Context building | 5 | Chunks, full_docs, empty, long titles |
| Custom prompt | 2 | –° placeholder, –±–µ–∑ placeholder |
| Interface | 2 | Mock —Ä–µ–∞–ª–∏–∑—É–µ—Ç ABC, abstract methods |

**GeminiLLMProvider (7 —Ç–µ—Å—Ç–æ–≤):**

| –¢–µ—Å—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| test_initialization | –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ |
| test_generate_basic | –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è |
| test_generate_with_system_prompt | –° —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º |
| test_generate_handles_error | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |
| test_generate_with_custom_model | –ö–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å |
| test_generate_no_usage_metadata | –ë–µ–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ |
| test_generate_empty_text | –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç |

### 6.3 MockLLMProvider

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è mock-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤:

- –†–µ–∞–ª–∏–∑—É–µ—Ç `BaseLLMProvider` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –≤—ã–∑–æ–≤—ã –≤ `calls: list[dict]`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π `response_text`
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ `input_tokens` –∏ `output_tokens`

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```python
mock_llm = MockLLMProvider(
    response_text="Based on context, answer is 42.",
    model="gemini-2.0-flash",
    input_tokens=100,
    output_tokens=50,
)

result = rag_engine.ask("What is the answer?")

assert mock_llm.calls[0]["prompt"] == "What is the answer?"
assert "CONTEXT" in mock_llm.calls[0]["system_prompt"]
```

---

## 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### 7.1 –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

| –ú–æ–¥—É–ª—å | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|--------|-----------|
| `interfaces/__init__.py` | –≠–∫—Å–ø–æ—Ä—Ç BaseLLMProvider, GenerationResult |
| `infrastructure/__init__.py` | –≠–∫—Å–ø–æ—Ä—Ç GeminiLLMProvider |
| `core/__init__.py` | –≠–∫—Å–ø–æ—Ä—Ç RAGEngine, RAGResult |
| `cli/commands/__init__.py` | –≠–∫—Å–ø–æ—Ä—Ç chat_cmd |
| `cli/app.py` | –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ chat_cmd |
| `utils/logger/formatters.py` | EMOJI_MAP –¥–ª—è chat, rag, llm |
| `pipeline.py` | –î–æ–±–∞–≤–ª–µ–Ω search_chunks() |

### 7.2 –ù–æ–≤—ã–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –ª–æ–≥–æ–≤

| –ú–æ–¥—É–ª—å | –≠–º–æ–¥–∑–∏ |
|--------|--------|
| chat | üí¨ |
| rag | üîó |
| llm | üß† |

–í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏:

- üí¨ ‚Äî —á–∞—Ç, –¥–∏–∞–ª–æ–≥
- üîó ‚Äî RAG —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- üß† ‚Äî LLM, –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç

---

## 8. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 8.1 Phase 9.1: Conversation History

- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ –ø–∞–º—è—Ç–∏/–ë–î
- –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ö–æ–º–∞–Ω–¥—ã `/clear`, `/history`

### 8.2 Phase 9.2: Streaming Responses

- Async –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å yield
- –ü–æ—Ç–æ–∫–æ–≤—ã–π –≤—ã–≤–æ–¥ –≤ CLI
- –û—Ç–º–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ Ctrl+C

### 8.3 Phase 9.3: Advanced Features

- –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π RAG (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ)
- –¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

---

## 9. –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 9.1 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| interfaces/llm.py | 85 | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ DTO |
| infrastructure/llm/gemini.py | 155 | –ü—Ä–æ–≤–∞–π–¥–µ—Ä Gemini |
| core/rag.py | 280 | RAG Engine |
| cli/commands/chat.py | 265 | CLI –∫–æ–º–∞–Ω–¥–∞ |
| pipeline.py | +50 | search_chunks() |
| **tests/** | 675 | Unit-—Ç–µ—Å—Ç—ã |
| **–ò—Ç–æ–≥–æ** | ~1510 | |

### 9.2 –¢–µ—Å—Ç—ã

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤ Phase 9.0:** 31 (24 + 7)
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ unit-—Ç–µ—Å—Ç–æ–≤:** 498 passed, 1 skipped
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2.7 —Å–µ–∫—É–Ω–¥—ã

### 9.3 –ö–æ–º–º–∏—Ç—ã

9 –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –∫–æ–º–º–∏—Ç–æ–≤ (–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞):

1. `feat: –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BaseLLMProvider`
2. `feat: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω GeminiLLMProvider`
3. `feat: –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ search_chunks() –≤ SemanticCore`
4. `feat: –°–æ–∑–¥–∞–Ω RAGEngine`
5. `feat: –î–æ–±–∞–≤–ª–µ–Ω–∞ CLI –∫–æ–º–∞–Ω–¥–∞ chat`
6. `feat: –î–æ–±–∞–≤–ª–µ–Ω—ã —ç–º–æ–¥–∑–∏ –¥–ª—è –º–æ–¥—É–ª–µ–π`
7. `feat: –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è RAGEngine`
8. `feat: –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è GeminiLLMProvider`
9. `docs: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Phase 9.0`

---

## 10. –í—ã–≤–æ–¥—ã

Phase 9.0 —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—ë—Ç **–±–∞–∑–æ–≤—ã–π RAG Engine** —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è** –¥–ª—è Gemini –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä** —Å–æ–µ–¥–∏–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- **CLI** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**

- –ß–∞–Ω–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
- –û–ø—Ü–∏—è full_docs –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ (–ø—Ä–æ—Å—Ç–æ—Ç–∞ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** Phase 9.1 –¥–æ–±–∞–≤–∏—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –¥–ª—è –º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤.

---

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** ~6 —á–∞—Å–æ–≤ (–≤–º–µ—Å—Ç–æ –æ—Ü–µ–Ω–∫–∏ 10 —á–∞—Å–æ–≤)  
**–ü—Ä–∏—á–∏–Ω–∞ —É—Å–∫–æ—Ä–µ–Ω–∏—è:** –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏–∑ Phase 8, –≥–æ—Ç–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤
