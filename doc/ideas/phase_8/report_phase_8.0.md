# üìã Phase 8.0: Core CLI Commands ‚Äî –û—Ç—á—ë—Ç

## üéØ –¶–µ–ª—å —Ñ–∞–∑—ã

–î–æ–±–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –∫–æ–º–∞–Ω–¥—ã CLI –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- `semantic ingest` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `semantic search` ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- `semantic docs` ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ö–æ–º–∞–Ω–¥–∞ `ingest`

**–§–∞–π–ª:** `semantic_core/cli/commands/ingest.py`

–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
# –û–¥–∏–Ω —Ñ–∞–π–ª
semantic ingest document.md

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
semantic ingest ./docs/

# –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º
semantic ingest ./docs/ --recursive --pattern "*.md"

# Dry-run (–±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
semantic ingest --dry-run ./docs/

# –° –∞–Ω–∞–ª–∏–∑–æ–º –º–µ–¥–∏–∞
semantic ingest ./images/ -r --enrich-media
```

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------------|----------|
| `--mode` | `-m` | –†–µ–∂–∏–º: sync (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), async |
| `--pattern` | `-p` | Glob-–ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ |
| `--recursive` | `-r` | –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π |
| `--enrich-media` | `-e` | –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ Gemini |
| `--dry-run` | `-n` | –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ |

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –º–µ–¥–∏–∞ (TEXT, IMAGE, AUDIO, VIDEO)
- Rich progress bar –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- JSON –≤—ã–≤–æ–¥ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- –°–≤–æ–¥–∫–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º (—É—Å–ø–µ—Ö/–æ—à–∏–±–∫–∏)

### 2. –ö–æ–º–∞–Ω–¥–∞ `search`

**–§–∞–π–ª:** `semantic_core/cli/commands/search.py`

–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º:

```bash
# –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
semantic search "–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥"

# –¢–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π
semantic search "–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫" --type vector

# –° –ø–æ—Ä–æ–≥–æ–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
semantic search "rate limiting" --threshold 0.5 --limit 20
```

**–û–ø—Ü–∏–∏:**
| –û–ø—Ü–∏—è | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------------|----------|
| `--limit` | `-l` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (1-100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10) |
| `--type` | `-t` | –¢–∏–ø –ø–æ–∏—Å–∫–∞: vector, fts, hybrid |
| `--threshold` | `-T` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0.0-1.0) |
| `--k` | `-k` | –ü–∞—Ä–∞–º–µ—Ç—Ä RRF (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60) |
| `--verbose` | `-v` | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö |

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- Rich —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤—ã–º score
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª—ë–Ω—ã–π (‚â•0.8), –∂—ë–ª—Ç—ã–π (‚â•0.5), –∫—Ä–∞—Å–Ω—ã–π (<0.5)
- JSON –≤—ã–≤–æ–¥ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –û–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 3. –ö–æ–º–∞–Ω–¥–∞ `docs`

**–§–∞–π–ª:** `semantic_core/cli/commands/docs.py`

–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

```bash
# –°–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤
semantic docs

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–ø–∏–∫
semantic docs search
semantic docs config
semantic docs api
```

**–¢–æ–ø–∏–∫–∏:**
| –¢–æ–ø–∏–∫ | –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ |
|-------|------------|
| `overview` | –û–±–∑–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| `search` | –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |
| `ingest` | –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –º–µ–¥–∏–∞ |
| `config` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| `api` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ |

### 4. UI —Å–ª–æ–π

**–§–∞–π–ª—ã:** `semantic_core/cli/ui/`

–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Rich –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```python
# renderers.py
render_search_results(query, results, search_type, verbose)
render_ingest_summary(success, failed, errors)
render_error(message, title)
render_success(message, title)

# spinners.py
with progress_spinner("–ó–∞–≥—Ä—É–∑–∫–∞..."):
    do_work()

with progress_bar(total=100, description="–û–±—Ä–∞–±–æ—Ç–∫–∞") as progress:
    for item in items:
        process(item)
        progress.advance(progress.current_task_id)

# ProgressTracker –∫–ª–∞—Å—Å
tracker = ProgressTracker(total=10)
with tracker:
    tracker.advance()
    tracker.update("Step 2")
```

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –¥–≤–∞ `@app.callback()` –≤ –æ–¥–∏–Ω
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ late import
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `semantic.toml` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**49 —Ç–µ—Å—Ç–æ–≤** –¥–ª—è Phase 8.0:

```
tests/unit/cli/test_cli_phase_8_0.py::TestIngestCommand (8 —Ç–µ—Å—Ç–æ–≤)
  - test_ingest_help
  - test_ingest_no_path_shows_error
  - test_ingest_nonexistent_path
  - test_ingest_dry_run_single_file
  - test_ingest_dry_run_directory
  - test_ingest_dry_run_with_pattern
  - test_ingest_dry_run_no_files_found
  - test_ingest_invalid_mode

tests/unit/cli/test_cli_phase_8_0.py::TestMediaTypeDetection (14 —Ç–µ—Å—Ç–æ–≤)
  - test_detect_media_type[doc.md-text]
  - test_detect_media_type[image.jpg-image]
  - test_detect_media_type[audio.mp3-audio]
  - test_detect_media_type[video.mp4-video]
  - ...

tests/unit/cli/test_cli_phase_8_0.py::TestSearchCommand (3 —Ç–µ—Å—Ç–∞)
tests/unit/cli/test_cli_phase_8_0.py::TestSearchValidation (2 —Ç–µ—Å—Ç–∞)
tests/unit/cli/test_cli_phase_8_0.py::TestDocsCommand (10 —Ç–µ—Å—Ç–æ–≤)
tests/unit/cli/test_cli_phase_8_0.py::TestUIRenderers (3 —Ç–µ—Å—Ç–∞)
tests/unit/cli/test_cli_phase_8_0.py::TestUISpinners (2 —Ç–µ—Å—Ç–∞)
tests/unit/cli/test_cli_phase_8_0.py::TestCommandIntegration (3 —Ç–µ—Å—Ç–∞)
```

**–í—Å–µ–≥–æ CLI —Ç–µ—Å—Ç–æ–≤:** 100 (Phase 8.3 + Phase 8.0)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
semantic_core/cli/
‚îú‚îÄ‚îÄ app.py              # –û–±–Ω–æ–≤–ª—ë–Ω: –æ–¥–∏–Ω callback, –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py     # –û–±–Ω–æ–≤–ª—ë–Ω: —ç–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ ingest.py       # +NEW: –∫–æ–º–∞–Ω–¥–∞ ingest
‚îÇ   ‚îú‚îÄ‚îÄ search.py       # +NEW: –∫–æ–º–∞–Ω–¥–∞ search
‚îÇ   ‚îî‚îÄ‚îÄ docs.py         # +NEW: –∫–æ–º–∞–Ω–¥–∞ docs
‚îî‚îÄ‚îÄ ui/
    ‚îú‚îÄ‚îÄ __init__.py     # +NEW: —ç–∫—Å–ø–æ—Ä—Ç UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    ‚îú‚îÄ‚îÄ renderers.py    # +NEW: —Ä–µ–Ω–¥–µ—Ä–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    ‚îî‚îÄ‚îÄ spinners.py     # +NEW: –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
```

## üîç –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

```bash
# Help
$ semantic --help
Usage: semantic [OPTIONS] COMMAND [ARGS]...

üß† Semantic Core CLI ‚Äî –í–∞—à –≤—Ç–æ—Ä–æ–π –º–æ–∑–≥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

Commands:
  init     ‚öôÔ∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  config   üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  doctor   ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
  ingest   –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  search   –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
  docs     –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

# Dry-run
$ semantic ingest --dry-run ./doc/architecture/
‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ üîç Dry Run ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
‚îÇ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 43                       ‚îÇ
‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ
  üìÑ doc/architecture/00_overview.md
  üìÑ doc/architecture/01_embeddings_basics.md
  ...

# Docs
$ semantic docs
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ –¢–æ–ø–∏–∫           ‚îÉ –û–ø–∏—Å–∞–Ω–∏–µ                            ‚îÉ
‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ üìö overview     ‚îÇ –û–±–∑–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç    ‚îÇ
‚îÇ üîç search       ‚îÇ –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã             ‚îÇ
‚îÇ üì• ingest       ‚îÇ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –º–µ–¥–∏–∞       ‚îÇ
‚îÇ ‚öôÔ∏è config        ‚îÇ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞            ‚îÇ
‚îÇ üîå api          ‚îÇ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- **Phase 8.1:** Batch –∫–æ–º–∞–Ω–¥—ã (queue status/process, batch list/submit)
- **Phase 8.2:** Stats/Analytics (stats show, search history)

## üìù –ö–æ–º–º–∏—Ç—ã

1. `feat: –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ CLI –∫–æ–º–∞–Ω–¥—ã (Phase 8.0)` ‚Äî 1748 —Å—Ç—Ä–æ–∫
