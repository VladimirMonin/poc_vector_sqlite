# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –û—Ç—á—ë—Ç: Phase 8.3 ‚Äî Unified Config & CLI Skeleton

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–ö–æ–º–º–∏—Ç—ã:** 4 (SemanticConfig + CLI skeleton + typer dependency + tests)  
**–í–µ—Ç–∫–∞:** `phase_8`

---

## üéØ –¶–µ–ª—å —Ñ–∞–∑—ã

–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

- **Unified Config:** –ï–¥–∏–Ω—ã–π `SemanticConfig` –≤–º–µ—Å—Ç–æ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **CLI Skeleton:** Typer-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∞–∑–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
- **TOML Support:** –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `semantic.toml`
- **Quick UX:** –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π `--help` –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üìê –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         semantic CLI                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  semantic init       ‚îÇ –°–æ–∑–¥–∞—Ç—å semantic.toml –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ       ‚îÇ
‚îÇ  semantic config     ‚îÇ show/check ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è        ‚îÇ
‚îÇ  semantic doctor     ‚îÇ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        CLIContext                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  get_config()   ‚îÇ  ‚îÇ   get_core()    ‚îÇ  ‚îÇget_batch_manager‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (immediate)    ‚îÇ  ‚îÇ    (lazy)       ‚îÇ  ‚îÇ     (lazy)      ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      SemanticConfig                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  database  ‚îÇ  ‚îÇ   gemini   ‚îÇ  ‚îÇ processing ‚îÇ  ‚îÇ  logging  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  db_path   ‚îÇ  ‚îÇ  api_key   ‚îÇ  ‚îÇ  splitter  ‚îÇ  ‚îÇ   level   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  Priority: CLI kwargs > env > TOML > defaults                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **Pydantic Settings –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤, env variables, defaults
2. **–ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ SemanticConfig** ‚Äî –±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
3. **Lazy Initialization –≤ CLIContext** ‚Äî SemanticCore —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. **Rich Console –¥–ª—è –≤—ã–≤–æ–¥–∞** ‚Äî –∫—Ä–∞—Å–∏–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã, —Ü–≤–µ—Ç–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. `semantic_core/config.py` (440 —Å—Ç—Ä–æ–∫)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|
| `SemanticConfig` | Pydantic BaseSettings —Å TOML –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π |
| `find_config_file()` | –ü–æ–∏—Å–∫ semantic.toml –≤ –¥–µ—Ä–µ–≤–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π |
| `get_config()` | –°–∏–Ω–≥–ª—Ç–æ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π overrides |
| `reset_config()` | –°–±—Ä–æ—Å —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤) |

**–ü–æ–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

| –°–µ–∫—Ü–∏—è | –ü–æ–ª–µ | Default | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|---------|----------|
| database | db_path | `semantic.db` | –ü—É—Ç—å –∫ SQLite |
| gemini | api_key | None | API –∫–ª—é—á Gemini |
| gemini | batch_key | None | –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è Batch API |
| gemini | embedding_model | `text-embedding-004` | –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ |
| gemini | embedding_dimension | 768 | –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤ |
| processing | splitter | `smart` | –¢–∏–ø —Å–ø–ª–∏—Ç—Ç–µ—Ä–∞ |
| processing | context_strategy | `hierarchical` | –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
| media | enabled | True | –ê–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞ |
| media | rpm_limit | 15 | Rate limit Vision API |
| search | limit | 10 | –õ–∏–º–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| search | type | `hybrid` | –¢–∏–ø –ø–æ–∏—Å–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| logging | level | `INFO` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤ –∫–æ–Ω—Å–æ–ª–∏ |
| logging | file | None | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ |

### 2. –ü–∞–∫–µ—Ç `semantic_core/cli/`

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `__init__.py` | Entry point `main()` |
| `app.py` | Typer app, callback —Å --version |
| `console.py` | Rich Console —Å–∏–Ω–≥–ª—Ç–æ–Ω |
| `context.py` | CLIContext —Å lazy –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π |
| `commands/__init__.py` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ |
| `commands/init_cmd.py` | `semantic init` |
| `commands/config_cmd.py` | `semantic config show/check` |
| `commands/doctor_cmd.py` | `semantic doctor` |

### 3. Entry Point

```toml
# pyproject.toml
[project.scripts]
semantic = "semantic_core.cli:main"
```

---

## üîç –ö–æ–º–∞–Ω–¥—ã CLI

### `semantic init`

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ —Å–æ–∑–¥–∞—ë—Ç `semantic.toml`:

```bash
$ semantic init

‚öôÔ∏è  –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Semantic Core –ø—Ä–æ–µ–∫—Ç–∞...

üìÅ –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (semantic.db): 
üìä –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è [TRACE/DEBUG/INFO/WARNING/ERROR] (INFO): DEBUG
‚úÇÔ∏è  –¢–∏–ø —Å–ø–ª–∏—Ç—Ç–µ—Ä–∞ [simple/smart] (smart): 
üñºÔ∏è  –í–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞? [y/n] (y): 

‚úÖ –°–æ–∑–¥–∞–Ω semantic.toml
```

### `semantic config show`

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```bash
$ semantic config show

‚öôÔ∏è  –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ò—Å—Ç–æ—á–Ω–∏–∫: defaults + environment

‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ –ù–∞—Å—Ç—Ä–æ–π–∫–∞                   ‚îÉ –ó–Ω–∞—á–µ–Ω–∏–µ           ‚îÉ
‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ database.path               ‚îÇ semantic.db        ‚îÇ
‚îÇ gemini.api_key              ‚îÇ AIza***...***1234  ‚îÇ
‚îÇ processing.splitter         ‚îÇ smart              ‚îÇ
‚îÇ search.type                 ‚îÇ hybrid             ‚îÇ
‚îÇ logging.level               ‚îÇ INFO               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### `semantic config check`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
$ semantic config check

‚öôÔ∏è  –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...

‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: semantic.db
‚úÖ API –∫–ª—é—á: –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚ö†Ô∏è  Batch API –∫–ª—é—á: –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (async —Ä–µ–∂–∏–º –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
‚úÖ Splitter: smart
‚úÖ Logging: INFO
```

### `semantic doctor`

–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
$ semantic doctor

üî¨ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Semantic Core...

‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          ‚îÉ –í–µ—Ä—Å–∏—è       ‚îÉ –°—Ç–∞—Ç—É—Å  ‚îÉ
‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ Python             ‚îÇ 3.14.0       ‚îÇ ‚úÖ      ‚îÇ
‚îÇ sqlite-vec         ‚îÇ 0.1.6        ‚îÇ ‚úÖ      ‚îÇ
‚îÇ GEMINI_API_KEY     ‚îÇ –Ω–∞—Å—Ç—Ä–æ–µ–Ω     ‚îÇ ‚úÖ      ‚îÇ
‚îÇ –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç.    ‚îÇ 42.5 GB      ‚îÇ ‚úÖ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `pyproject.toml`:

```toml
dependencies = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ...
    "typer[all] (>=0.9.0,<1.0.0)"  # CLI + Rich
]
```

---

## ‚úÖ –¢–µ—Å—Ç—ã

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `tests/unit/cli/`

| –§–∞–π–ª | –¢–µ—Å—Ç–æ–≤ | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|------|--------|----------|
| `test_config.py` | 22 | SemanticConfig, TOML, env, singleton |
| `test_cli_commands.py` | 21 | init, config, doctor, context |
| **–ò—Ç–æ–≥–æ** | **51** | **CLI + Config** |

**–ö–ª–∞—Å—Å—ã —Ç–µ—Å—Ç–æ–≤:**

```
TestSemanticConfigDefaults (7)
TestSemanticConfigFromToml (6)
TestSemanticConfigEnvVars (3)
TestSemanticConfigPriority (2)
TestFindConfigFile (3)
TestGetConfigSingleton (2)
TestConfigValidators (6)
TestSemanticConfigFullToml (1)
TestCliApp (3)
TestInitCommand (2)
TestConfigCommand (4)
TestDoctorCommand (4)
TestCliGlobalOptions (1)
TestCliContext (2)
TestCliConsole (2)
TestCliEdgeCases (3)
```

---

## üõ†Ô∏è –†–µ—à—ë–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. TOML-to-flat mapping

**–ü—Ä–æ–±–ª–µ–º–∞:** TOML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–∫—Ü–∏–∏ `[database]`, –∞ Pydantic ‚Äî –ø–ª–æ—Å–∫–∏–µ –ø–æ–ª—è `db_path`

**–†–µ—à–µ–Ω–∏–µ:** –ú–∞–ø–ø–∏–Ω–≥ –≤ `_load_toml()`:
```python
mapping = {
    ("database", "path"): "db_path",
    ("gemini", "api_key"): "gemini_api_key",
    ...
}
```

### 2. Lazy CLI Context

**–ü—Ä–æ–±–ª–µ–º–∞:** `semantic --help` –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å SemanticCore (–º–µ–¥–ª–µ–Ω–Ω–æ)

**–†–µ—à–µ–Ω–∏–µ:** `CLIContext` —Å –ª–µ–Ω–∏–≤—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:
```python
@property
def core(self) -> SemanticCore:
    if self._core is None:
        self._core = SemanticCore(...)
    return self._core
```

### 3. API Key –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** `config show` –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:** –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `config_cmd.py`:
```python
def mask_secret(value: str) -> str:
    if len(value) <= 8:
        return "***"
    return f"{value[:4]}***...***{value[-4:]}"
```

### 4. TOML –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π TOML –Ω–µ –¥–æ–ª–∂–µ–Ω –∫—Ä–∞—à–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:** Graceful degradation –≤ `_load_toml()`:
```python
try:
    raw = tomllib.load(f)
except Exception as e:
    logger.warning("Failed to load TOML", error=str(e))
    return {}  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç—ã
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ | 10 |
| –î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ | ~1500 |
| –ù–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ | 3 |
| –ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π | 15+ |
| Unit-—Ç–µ—Å—Ç–æ–≤ | 51 |
| –ö–æ–º–º–∏—Ç–æ–≤ | 4 |

---

## üîÑ –û—Ç–ª–∏—á–∏—è –æ—Ç –ø–ª–∞–Ω–∞

| –ü—É–Ω–∫—Ç –ø–ª–∞–Ω–∞ | –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|-------------|----------------------|
| –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (SplitterConfig, etc.) | –ü–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
| pyproject.toml [tool.semantic] | –û—Ç–¥–µ–ª—å–Ω—ã–π semantic.toml ‚Äî —á–∏—â–µ |
| --verbose, --db-path –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–±—É–¥—É—Ç –≤ Phase 8.0) |

---

## ‚úÖ Definition of Done

1. ‚úÖ **SemanticConfig —Å–æ–∑–¥–∞–Ω:** Pydantic Settings —Å TOML + env
2. ‚úÖ **CLI skeleton –≥–æ—Ç–æ–≤:** `semantic init/config/doctor` —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ **Entry point –Ω–∞—Å—Ç—Ä–æ–µ–Ω:** `poetry run semantic --help`
4. ‚úÖ **Typer –¥–æ–±–∞–≤–ª–µ–Ω:** `typer[all]>=0.9.0` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
5. ‚úÖ **–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã:** 51 —Ç–µ—Å—Ç –ø–æ–∫—Ä—ã–≤–∞—é—Ç config + CLI
6. ‚úÖ **Lazy initialization:** `--help` –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- **Phase 8.0:** `semantic add` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **Phase 8.1:** `semantic search` ‚Äî –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- **Phase 8.2:** `semantic batch` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é

**–§—É–Ω–¥–∞–º–µ–Ω—Ç CLI –≥–æ—Ç–æ–≤!** üéâ
