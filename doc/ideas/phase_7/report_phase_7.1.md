# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –û—Ç—á—ë—Ç: Phase 7.1 ‚Äî Processing Layer Instrumentation

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–î–∞—Ç–∞:** 3 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ç–∫–∞:** `phase_7`

---

## üéØ –¶–µ–ª—å —Ñ–∞–∑—ã

–í–Ω–µ–¥—Ä–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Processing Layer), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å **–ø–æ–ª–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å** —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –ø–∞—Ä—Å–∏–Ω–≥ ‚Üí —Ä–∞–∑–±–∏–µ–Ω–∏–µ ‚Üí –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º.

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤ | 4 |
| –î–æ–±–∞–≤–ª–µ–Ω–æ —Ç–æ—á–µ–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | 28 |
| –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤ | DEBUG, TRACE, INFO, ERROR |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bind() | 4 –º–æ–¥—É–ª—è |
| –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏ –ø–æ–∫—Ä—ã—Ç–æ raise | 1 |

---

## üìÇ –¶–µ–ª–µ–≤—ã–µ –º–æ–¥—É–ª–∏

```text
semantic_core/processing/
‚îú‚îÄ‚îÄ parsers/
‚îÇ   ‚îî‚îÄ‚îÄ markdown_parser.py      # MarkdownNodeParser ‚Äî üß∂
‚îú‚îÄ‚îÄ splitters/
‚îÇ   ‚îî‚îÄ‚îÄ smart_splitter.py       # SmartSplitter ‚Äî ‚úÇÔ∏è
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ hierarchical_strategy.py # HierarchicalContextStrategy ‚Äî üß¨
‚îî‚îÄ‚îÄ enrichers/
    ‚îî‚îÄ‚îÄ markdown_assets.py      # MarkdownAssetEnricher ‚Äî üñºÔ∏è
```

---

## üîç –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. `markdown_parser.py` ‚Äî MarkdownNodeParser

**–≠–º–æ–¥–∑–∏ –º–æ–¥—É–ª—è:** üß∂ (–ø–∞—Ç—Ç–µ—Ä–Ω `parser`)

**–¢–æ—á–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –ú–µ—Ç–æ–¥ | –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º |
|-------|---------|--------------|
| `parse()` –≤—Ö–æ–¥ | DEBUG | –î–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –Ω–∞–ª–∏—á–∏–µ frontmatter |
| `parse()` –ø–æ—Å–ª–µ md.parse() | TRACE | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ | TRACE | –£—Ä–æ–≤–µ–Ω—å h1-h6, —Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞ | TRACE | –Ø–∑—ã–∫, —Ä–∞–∑–º–µ—Ä, –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ | TRACE | –¢–∏–ø –º–µ–¥–∏–∞, –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É |
| `parse()` –≤—ã—Ö–æ–¥ | INFO | –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: headers, paragraphs, code_blocks, media, lists, quotes |

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
üß∂ –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞: 4532 —Å–∏–º–≤–æ–ª–æ–≤, frontmatter=True
üß∂ markdown-it –≤—ã–¥–∞–ª 47 —Ç–æ–∫–µ–Ω–æ–≤ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
üß∂ –ó–∞–≥–æ–ª–æ–≤–æ–∫ h2: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞'
üß∂ –ë–ª–æ–∫ –∫–æ–¥–∞: lang=python, 256 —Å–∏–º–≤–æ–ª–æ–≤, —Å—Ç—Ä–æ–∫–∏ 15-25
üß∂ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω: headers=5, paragraphs=12, code_blocks=3, media=2, lists=4, quotes=1
```

### 2. `smart_splitter.py` ‚Äî SmartSplitter

**–≠–º–æ–¥–∑–∏ –º–æ–¥—É–ª—è:** ‚úÇÔ∏è (–ø–∞—Ç—Ç–µ—Ä–Ω `splitter`)

**–¢–æ—á–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –ú–µ—Ç–æ–¥ | –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º |
|-------|---------|--------------|
| `split()` –≤—Ö–æ–¥ | DEBUG | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ chunk_size, code_chunk_size, preserve_code |
| –ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ | DEBUG | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ CODE —Å–µ–≥–º–µ–Ω—Ç–∞ | TRACE | –†–∞–∑–º–µ—Ä –∫–æ–¥–∞, —è–∑—ã–∫, –±—É–¥–µ—Ç –ª–∏ split |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ MEDIA —Å–µ–≥–º–µ–Ω—Ç–∞ | TRACE | –¢–∏–ø –º–µ–¥–∏–∞, –Ω–∞—á–∞–ª–æ –ø—É—Ç–∏ |
| –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ | TRACE | –¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä vs –ª–∏–º–∏—Ç |
| –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–±—Ä–æ—Å –±—É—Ñ–µ—Ä–∞ | TRACE | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ |
| `split()` –≤—ã—Ö–æ–¥ | INFO | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: —Å–µ–≥–º–µ–Ω—Ç—ã ‚Üí —á–∞–Ω–∫–∏ (text/code/media) |
| `_flush_text_buffer()` –≤—Ö–æ–¥ | TRACE | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä |
| `_flush_text_buffer()` –≤—ã—Ö–æ–¥ | TRACE | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ |
| `_create_code_chunks()` —Ä–µ—à–µ–Ω–∏–µ | TRACE | –í–ª–µ–∑–∞–µ—Ç –≤ –ª–∏–º–∏—Ç –∏–ª–∏ —Ä–µ–∂–µ–º –ø–æ—Å—Ç—Ä–æ—á–Ω–æ |
| `_create_code_chunks()` –±–æ–ª—å—à–æ–π –±–ª–æ–∫ | TRACE | –ù–∞ —Å–∫–æ–ª—å–∫–æ —á–∞–Ω–∫–æ–≤ —Ä–∞–∑–±–∏—Ç |
| –ü—É—Å—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç | ERROR | –ü–µ—Ä–µ–¥ raise ValueError |

**–ö–æ–Ω—Ç–µ–∫—Å—Ç bind():** `doc_id` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ metadata –∏–ª–∏ document.id

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
‚úÇÔ∏è [doc-123] –ù–∞—á–∞–ª–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è: chunk_size=1000, code_chunk_size=2000, preserve_code=True
‚úÇÔ∏è [doc-123] –ü–æ–ª—É—á–µ–Ω–æ 17 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞
‚úÇÔ∏è [doc-123] –°–µ–≥–º–µ–Ω—Ç[3] CODE: 450 —Å–∏–º–≤–æ–ª–æ–≤, lang=python, split=False
‚úÇÔ∏è [doc-123] –†–∞–∑–±–∏–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 17 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ ‚Üí 23 —á–∞–Ω–∫–∞ (text=15, code=5, media=3)
```

### 3. `hierarchical_strategy.py` ‚Äî HierarchicalContextStrategy

**–≠–º–æ–¥–∑–∏ –º–æ–¥—É–ª—è:** üß¨ (–ø–∞—Ç—Ç–µ—Ä–Ω `context`, `hierarchy`)

**–¢–æ—á–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –ú–µ—Ç–æ–¥ | –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º |
|-------|---------|--------------|
| `form_vector_text()` –≤—Ö–æ–¥ | TRACE | –¢–∏–ø —á–∞–Ω–∫–∞ |
| Breadcrumbs –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã | TRACE | –ü—É—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ (h1 > h2 > h3) |
| –û–±–æ–≥–∞—â—ë–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ | TRACE | –§–∞–∫—Ç –æ–±–æ–≥–∞—â–µ–Ω–∏—è Vision API |
| –û–±–æ–≥–∞—â—ë–Ω–Ω–æ–µ –∞—É–¥–∏–æ | TRACE | –§–∞–∫—Ç –æ–±–æ–≥–∞—â–µ–Ω–∏—è Audio API |
| –û–±–æ–≥–∞—â—ë–Ω–Ω–æ–µ –≤–∏–¥–µ–æ | TRACE | –§–∞–∫—Ç –æ–±–æ–≥–∞—â–µ–Ω–∏—è Video API |
| `form_vector_text()` –≤—ã—Ö–æ–¥ | DEBUG | –¢–∏–ø —á–∞–Ω–∫–∞, —Ä–∞–∑–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |

**–ö–æ–Ω—Ç–µ–∫—Å—Ç bind():** `chunk_id` ‚Äî —Ñ–æ—Ä–º–∞—Ç `chunk-{index}`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
üß¨ [chunk-5] –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ç–∏–ø–∞ CODE
üß¨ [chunk-5] Breadcrumbs: –ì–∞–π–¥ > –£—Å—Ç–∞–Ω–æ–≤–∫–∞ > Linux
üß¨ [chunk-5] –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω: type=CODE, –¥–æ–±–∞–≤–ª–µ–Ω–æ +45 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

### 4. `markdown_assets.py` ‚Äî MarkdownAssetEnricher

**–≠–º–æ–¥–∑–∏ –º–æ–¥—É–ª—è:** üñºÔ∏è (–ø–∞—Ç—Ç–µ—Ä–Ω `asset`, `enricher`)

**–¢–æ—á–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**

| –ú–µ—Ç–æ–¥ | –£—Ä–æ–≤–µ–Ω—å | –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º |
|-------|---------|--------------|
| `get_context()` –≤—Ö–æ–¥ | DEBUG | –¢–∏–ø –º–µ–¥–∏–∞, –Ω–∞—á–∞–ª–æ –ø—É—Ç–∏ |
| Breadcrumbs –Ω–∞–π–¥–µ–Ω—ã | TRACE | –ü—É—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ |
| –û–∫—Ä—É–∂–∞—é—â–∏–π —Ç–µ–∫—Å—Ç –Ω–∞–π–¥–µ–Ω | TRACE | –†–∞–∑–º–µ—Ä—ã before/after |
| `get_context()` –≤—ã—Ö–æ–¥ | INFO | –¢–∏–ø, –Ω–∞–ª–∏—á–∏–µ breadcrumbs/surrounding/alt |
| `_find_neighbor_text()` –Ω–∞–π–¥–µ–Ω | TRACE | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, chunk_index, —Ä–∞–∑–º–µ—Ä |
| `_find_neighbor_text()` –Ω–µ –Ω–∞–π–¥–µ–Ω | TRACE | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |

**–ö–æ–Ω—Ç–µ–∫—Å—Ç bind():** `chunk_id` ‚Äî —Ñ–æ—Ä–º–∞—Ç `chunk-{index}`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**

```
üñºÔ∏è [chunk-7] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è IMAGE_REF: ./images/logo.png
üñºÔ∏è [chunk-7] Breadcrumbs: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è > –ë—Ä–µ–Ω–¥–∏–Ω–≥
üñºÔ∏è [chunk-7] –ù–∞–π–¥–µ–Ω –æ–∫—Ä—É–∂–∞—é—â–∏–π —Ç–µ–∫—Å—Ç: before=150 chars, after=200 chars
üñºÔ∏è [chunk-7] –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á—ë–Ω: type=image, has_breadcrumbs=True, has_surrounding=True, has_alt=True
```

---

## üõ†Ô∏è –†–µ—à—ë–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ê—Ç—Ä–∏–±—É—Ç doc_id vs id –≤ Document

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ `smart_splitter.py` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∞—Ç—Ä–∏–±—É—Ç `document.doc_id`.

**–°–∏–º–ø—Ç–æ–º:**

```
AttributeError: 'Document' object has no attribute 'doc_id'
```

**–ê–Ω–∞–ª–∏–∑:** –ö–ª–∞—Å—Å `Document` (dataclass) –∏–º–µ–µ—Ç –∞—Ç—Ä–∏–±—É—Ç `id: Optional[int]`, –∞ –Ω–µ `doc_id`.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# –ë—ã–ª–æ (–Ω–µ–≤–µ—Ä–Ω–æ):
doc_id = document.metadata.get("doc_id", document.doc_id[:8] if document.doc_id else "unknown")

# –°—Ç–∞–ª–æ (–≤–µ—Ä–Ω–æ):
doc_id = document.metadata.get("doc_id") or (
    str(document.id)[:8] if document.id else "unknown"
)
```

**–õ–æ–≥–∏–∫–∞:** –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º `doc_id` –≤ metadata (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä), –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–≤—ã–µ 8 —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è `id`, –∏–Ω–∞—á–µ `"unknown"`.

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ raise/except –≤ 3 –∏–∑ 4 –º–æ–¥—É–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–∏—Å–∫–µ `raise|except` –≤ —Ü–µ–ª–µ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö –Ω–∞–π–¥–µ–Ω —Ç–æ–ª—å–∫–æ 1 `raise ValueError` –≤ `smart_splitter.py`.

**–ê–Ω–∞–ª–∏–∑:** –ú–æ–¥—É–ª–∏ `markdown_parser.py`, `hierarchical_strategy.py`, `markdown_assets.py` –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —è–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π ‚Äî –æ–Ω–∏ –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫.

**–†–µ—à–µ–Ω–∏–µ:** –î–ª—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ `raise ValueError` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ERROR –ø–µ—Ä–µ–¥ –≤—ã–±—Ä–æ—Å–æ–º:

```python
if not document.content or not document.content.strip():
    log.error("–ü–æ–ø—ã—Ç–∫–∞ —Ä–∞–∑–±–∏—Ç—å –ø—É—Å—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç")
    raise ValueError("Document content is empty")
```

### 3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ parse() –∫–∞–∫ generator

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `parse()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Iterator[ParsingSegment]` (generator), —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç –ø–æ–¥—Å—á—ë—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ INFO-–ª–æ–≥–∞.

**–†–µ—à–µ–Ω–∏–µ:** –í–≤–µ–¥—ë–Ω —Å–ª–æ–≤–∞—Ä—å `stats` –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ yield —Å–µ–≥–º–µ–Ω—Ç–æ–≤:

```python
stats = {"headers": 0, "paragraphs": 0, "code_blocks": 0, "media": 0, "lists": 0, "quotes": 0}

# –í —Ç–µ–ª–µ —Ü–∏–∫–ª–∞:
stats["headers"] += 1
stats["code_blocks"] += 1
# ...

# –ü–æ—Å–ª–µ —Ü–∏–∫–ª–∞:
logger.info(f"–ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω: headers={stats['headers']}, ...")
```

–í–∞–∂–Ω–æ: INFO-–ª–æ–≥ —Å –∏—Ç–æ–≥–∞–º–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º —Ç–æ–∫–µ–Ω–∞–º, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

---

## üìê –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω –∏–º–ø–æ—Ä—Ç–∞

–í—Å–µ 4 –º–æ–¥—É–ª—è —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É:

```python
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞, –ø–æ—Å–ª–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
from semantic_core.utils.logger import get_logger

logger = get_logger(__name__)
```

### –ü–∞—Ç—Ç–µ—Ä–Ω bind() –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```python
def method(self, doc_id: str, ...):
    log = logger.bind(doc_id=doc_id)
    log.debug("Starting process")
    
    for i, item in enumerate(items):
        item_log = log.bind(item_index=i)
        item_log.trace("Processing item")
```

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –£—Ä–æ–≤–µ–Ω—å | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|---------|-------------------|
| TRACE | –î–µ—Ç–∞–ª–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π, –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| DEBUG | –í—Ö–æ–¥ –≤ –º–µ—Ç–æ–¥, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ |
| INFO | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π, –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| ERROR | –ü–µ—Ä–µ–¥ raise, –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏

- [x] –í—Å–µ 4 –º–æ–¥—É–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [x] –ö–∞–∂–¥—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –∏–º–µ–µ—Ç DEBUG –Ω–∞ –≤—Ö–æ–¥–µ
- [x] –ö–∞–∂–¥—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ –∏–º–µ–µ—Ç INFO/DEBUG –Ω–∞ –≤—ã—Ö–æ–¥–µ
- [x] TRACE –ª–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
- [x] –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π raise –ø–æ–∫—Ä—ã—Ç –ª–æ–≥–æ–º ERROR
- [x] EMOJI_MAP —É–∂–µ —Ä–∞—Å—à–∏—Ä–µ–Ω (Phase 7.0 prep)

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- [x] –õ–æ–≥–∏ –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- [x] –ö–æ–Ω—Ç–µ–∫—Å—Ç (doc_id, chunk_id) –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ bind()
- [x] –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞/—Ö–µ—à –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω (py_compile)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º

```bash
# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö raise/except –≤ —Ü–µ–ª–µ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö
grep -n "raise\|except" semantic_core/processing/**/*.py

# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–ª—å–∫–æ 1 —Å—Ç—Ä–æ–∫–∞ –≤ smart_splitter.py ‚Äî –ø–æ–∫—Ä—ã—Ç–∞
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ª–æ–≥–∞—Ö

–ü–æ—Å–ª–µ Phase 7.1 –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ (INFO+) –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:

```
üß∂ –ù–∞—á–∞–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞: 4532 —Å–∏–º–≤–æ–ª–æ–≤, frontmatter=True
üß∂ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω: headers=5, paragraphs=12, code_blocks=3, media=2, lists=4, quotes=1
‚úÇÔ∏è [doc-abc123] –ù–∞—á–∞–ª–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è: chunk_size=1000
‚úÇÔ∏è [doc-abc123] –ü–æ–ª—É—á–µ–Ω–æ 22 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –æ—Ç –ø–∞—Ä—Å–µ—Ä–∞
‚úÇÔ∏è [doc-abc123] –†–∞–∑–±–∏–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 22 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ ‚Üí 28 —á–∞–Ω–∫–æ–≤ (text=20, code=5, media=3)
üß¨ [chunk-5] –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω: type=CODE, –¥–æ–±–∞–≤–ª–µ–Ω–æ +45 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
üñºÔ∏è [chunk-12] –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á—ë–Ω: type=image, has_breadcrumbs=True, has_surrounding=True, has_alt=True
```

–í —Ñ–∞–π–ª–æ–≤—ã—Ö –ª–æ–≥–∞—Ö (TRACE) –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞, —Å–µ–≥–º–µ–Ω—Ç–∞ –∏ —Ä–µ—à–µ–Ω–∏—è.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** [Phase 7.0 ‚Äî Logging Core](phase_7.0.md) ‚úÖ
- **–ü–ª–∞–Ω:** [Phase 7.1 ‚Äî Processing Layer](phase_7.1.md)
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ:** Phase 7.2 (Infrastructure), Phase 7.3 (Diagnostics) ‚Äî –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [35_semantic_logging.md](../../architecture/35_semantic_logging.md)
