# üî• Phase 14: Media Content Crisis

> **–°—Ç–∞—Ç—É—Å:** üîÑ –í –†–ê–ó–†–ê–ë–û–¢–ö–ï  
> **–¶–µ–ª—å:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø–æ—Ç–µ—Ä–∏ 67-95% –¥–∞–Ω–Ω—ã—Ö –≤ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–µ

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–∑—ã

### 71. Media Content Truncation Crisis

**–§–∞–π–ª:** [71_media_content_truncation_crisis.md](71_media_content_truncation_crisis.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã: 67-95% –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –≤ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–∞—Ö –∏–∑-–∑–∞ hardcoded –ª–∏–º–∏—Ç–æ–≤ 8k —Ç–æ–∫–µ–Ω–æ–≤.

---

### 72. Multi-Chunk Media Architecture

**–§–∞–π–ª:** [72_multi_chunk_media_architecture.md](72_multi_chunk_media_architecture.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–†–µ—à–µ–Ω–∏–µ –∫—Ä–∏–∑–∏—Å–∞ —á–µ—Ä–µ–∑ multi-chunk –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É: summary chunk (2k) + transcript chunks (8k) + OCR chunks (SmartSplitter).

---

### 73. Multilingual Media Analysis

**–§–∞–π–ª:** [73_multilingual_media_analysis.md](73_multilingual_media_analysis.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —è–∑—ã–∫–∞ –≤—ã–≤–æ–¥–∞ Gemini —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ `[media.analysis] language = "Russian"`.

---

### 74. Media Smart Splitter Integration

**–§–∞–π–ª:** [74_media_smart_splitter_integration.md](74_media_smart_splitter_integration.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SmartSplitter –¥–ª—è OCR-—Ç–µ–∫—Å—Ç–∞ —Å –∏–∑–æ–ª—è—Ü–∏–µ–π code blocks –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º false positives.

---

### 75. Processing Steps Architecture

**–§–∞–π–ª:** [75_processing_steps_architecture.md](75_processing_steps_architecture.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.0)

–ú–æ–¥—É–ª—å–Ω–∞—è step-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: MediaContext, BaseProcessingStep, MediaPipeline. **25 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 76. Smart Steps: Summary & Transcription

**–§–∞–π–ª:** [76_smart_steps_summary_transcription.md](76_smart_steps_summary_transcription.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.1)

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è SummaryStep –∏ TranscriptionStep –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞. **25 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 77. OCR Step ‚Äî Smart Parsing

**–§–∞–π–ª:** [77_smart_step_ocr.md](77_smart_step_ocr.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.1)

OCRStep —Å Markdown-–ø–∞—Ä—Å–∏–Ω–≥–æ–º –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ code blocks –≤ –≤–∏–¥–µ–æ-—Å–∫—Ä–∏–Ω–∫–∞—Å—Ç–∞—Ö. **15 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 78. TimecodeParser

**–§–∞–π–ª:** [78_timecode_parser.md](78_timecode_parser.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.2)

–ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞–π–º–∫–æ–¥–æ–≤ `[MM:SS]`/`[HH:MM:SS]` –∏–∑ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º. **34 unit-—Ç–µ—Å—Ç–∞.**

---

### 79. Analyzer Migration ‚Äî response.parsed

**–§–∞–π–ª:** [79_analyzer_migration_response_parsed.md](79_analyzer_migration_response_parsed.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.3)

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ audio/video/image analyzers: –º–∏–≥—Ä–∞—Ü–∏—è —Å `json.loads()` –Ω–∞ `response.parsed` (Pydantic). **-27 LOC.**

---

### 80. E2E Testing & MediaPipeline Integration

**–§–∞–π–ª:** [80_e2e_testing_mediapipeline_integration.md](80_e2e_testing_mediapipeline_integration.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.1.4)

–§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MediaPipeline –≤ SemanticCore, —É–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞. **6 E2E —Ç–µ—Å—Ç–æ–≤, -82 LOC.**

---

### 81. MediaService & Aggregation Layer

**–§–∞–π–ª:** [81_mediaservice_aggregation_layer.md](81_mediaservice_aggregation_layer.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.2)

–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –º–µ–¥–∏–∞-—á–∞–Ω–∫–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ DTO (MediaDetails, Timeline). **9 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 82. Configuration & Template Injection

**–§–∞–π–ª:** [82_configuration_template_injection.md](82_configuration_template_injection.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.3.1)

MediaConfig models (4 Pydantic classes) + Template Injection pattern –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ chunk sizes. **38 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 83. MediaService.reprocess_document()

**–§–∞–π–ª:** [83_media_service_reprocess.md](83_media_service_reprocess.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.3.3)

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ custom_instructions —á–µ—Ä–µ–∑ SRP-compliant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. Single Source of Truth: `Document.metadata["source"]`. **9 unit-—Ç–µ—Å—Ç–æ–≤.**

---

### 82. Configuration & Template Injection

**–§–∞–π–ª:** [82_configuration_template_injection.md](82_configuration_template_injection.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.3.1)

MediaConfig models (4 Pydantic classes) + Template Injection pattern –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ chunk sizes —á–µ—Ä–µ–∑ `semantic.toml`. **38 unit-—Ç–µ—Å—Ç–æ–≤, commit `d270238`.**

---

### 83. MediaService.reprocess_document()

**–§–∞–π–ª:** [83_media_service_reprocess.md](83_media_service_reprocess.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.3.3)

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ custom_instructions —á–µ—Ä–µ–∑ SRP-compliant –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. Single Source of Truth: `Document.metadata["source"]`. **9 unit-—Ç–µ—Å—Ç–æ–≤, commit `65f060b`.**

---

### 84. CLI Integration ‚Äî `semantic reanalyze`

**–§–∞–π–ª:** [84_cli_reanalyze_command.md](84_cli_reanalyze_command.md)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 14.3.4)

CLI –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤. –§–ª–∞–≥–∏: `--prompt`, `--show-details`, `--force`. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, Rich UI, –ø–æ–ª–Ω–æ–µ error handling. **11 unit-—Ç–µ—Å—Ç–æ–≤, commit `8acfc89`.**

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–∑—ã

- **Phase 4:** [Smart Parsing](../phase_4_smart_parsing/) ‚Äî SmartSplitter –¥–ª—è OCR
- **Phase 6:** [Multimodal](../phase_6_multimodal/) ‚Äî media analyzers
- **Phase 13:** [Audit](../phase_13_audit/) ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫—Ä–∏–∑–∏—Å–∞

---

**‚Üê [–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](../00_overview.md)**
