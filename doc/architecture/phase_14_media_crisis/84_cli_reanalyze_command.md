# 84. CLI Integration â€” `semantic reanalyze` Command

> **Phase:** 14.3.4  
> **Commit:** `8acfc89`  
> **Ğ¢ĞµÑÑ‚Ñ‹:** 11/11 âœ…

---

## ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

ĞŸĞ¾ÑĞ»Ğµ Phase 14.3.1-14.3.3 Ñƒ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ:

- âœ… MediaConfig Ğ´Ğ»Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· `semantic.toml`
- âœ… MediaService.reprocess_document() Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
- âŒ **ĞĞ•Ğ¢ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ° Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ reanalyze Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞ¸**

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ½ÑƒĞ¶Ğ´ĞµĞ½ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Python-ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹:

```python
# âŒ ĞŸĞ›ĞĞ¥Ğ: Ğ½ÑƒĞ¶ĞµĞ½ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
from semantic_core import SemanticCore

core = SemanticCore()
core.reanalyze("doc-123", custom_instructions="Extract medical terms")
```

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:**

1. Ğ‘Ğ°Ñ€ÑŒĞµÑ€ Ğ²Ñ…Ğ¾Ğ´Ğ° â€” Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‚ÑŒ Python API
2. ĞĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² shell-ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°Ñ…
3. ĞĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ â†’ Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ

---

## Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: `semantic reanalyze` CLI Command

CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ñ Rich UI, Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ error handling.

### Ğ¡Ğ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ

```bash
semantic reanalyze <document_id> [OPTIONS]
```

### ĞĞ¿Ñ†Ğ¸Ğ¸

| Ğ¤Ğ»Ğ°Ğ³ | ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------|----------|----------|
| `--prompt` | `-p` | ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ (Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ config) |
| `--show-details` | `-d` | ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° (summary, transcript, OCR) |
| `--force` | `-f` | ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ (Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²) |

---

## User Experience

### 1. Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)

```bash
$ semantic reanalyze doc-abc123

â•­â”€ ğŸ”„ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ âš ï¸  Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ                                      â”‚
â”‚                                                   â”‚
â”‚ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚: doc-abc123                              â”‚
â”‚ Ğ‘ÑƒĞ´ÑƒÑ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ñ‹: ÑÑ‚Ğ°Ñ€Ñ‹Ğµ chunks (summary, transcript)â”‚
â”‚ Ğ‘ÑƒĞ´ÑƒÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹: Ğ½Ğ¾Ğ²Ñ‹Ğµ chunks Ñ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€.  â”‚
â”‚                                                   â”‚
â”‚ ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ?                                       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ reanalyze? [y/n]: _
```

### 2. Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ² (`--force`)

```bash
$ semantic reanalyze doc-abc123 --force

ğŸ”„ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°: doc-abc123
â ‹ ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ»...

â•­â”€ âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½!                              â”‚
â”‚                                                   â”‚
â”‚ Document ID: doc-abc123                           â”‚
â”‚ Ğ¢Ğ¸Ğ¿: audio                                        â”‚
â”‚ Chunks: 5                                         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### 3. Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° (`--show-details`)

```bash
$ semantic reanalyze doc-abc123 --force --show-details

# ... ÑƒÑĞ¿ĞµÑ… ...

ğŸ“Š Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°

â•­â”€ ğŸ“ Summary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Medical lecture about diabetes treatment...       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â•­â”€ ğŸ™ï¸ Transcript (5234 chars) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ [00:15] Today we will discuss insulin therapy...  â”‚
â”‚ [02:30] The main contraindications are...         â”‚
â”‚ ...                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â±ï¸ Timeline
â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Ğ’Ñ€ĞµĞ¼Ñ    â”ƒ ĞŸÑ€ĞµĞ²ÑŒÑ                             â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ 00:00    â”‚ Introduction to diabetes types     â”‚
â”‚ 02:15    â”‚ Insulin therapy basics             â”‚
â”‚ 05:30    â”‚ Dosage calculation methods         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling

| ĞÑˆĞ¸Ğ±ĞºĞ° | Exit Code | UI |
|--------|-----------|-----|
| Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ | 1 | `âŒ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: {id}` + Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° `semantic search` |
| ĞĞµ Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ» | 1 | `âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸: Document is not a media file` + Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹ |
| Ğ¤Ğ°Ğ¹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ | 1 | `âŒ Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: {path}` + Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ/ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ |
| ĞĞµĞ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ° | 1 | `âŒ ĞĞµĞ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ½Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°: {error}` |

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

```bash
# DoesNotExist
$ semantic reanalyze invalid-id --force
â•­â”€ âŒ ĞÑˆĞ¸Ğ±ĞºĞ° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ âŒ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: invalid-id                 â”‚
â”‚                                                   â”‚
â”‚ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ID Ğ¸Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ:                     â”‚
â”‚   semantic search "..." --verbose                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

# ValueError (TEXT Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚)
$ semantic reanalyze doc-text --force
â•­â”€ âŒ ĞÑˆĞ¸Ğ±ĞºĞ° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸: Document is not a media file â”‚
â”‚                                                   â”‚
â”‚ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹:                                â”‚
â”‚   â€¢ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ¼ (IMAGE/...) â”‚
â”‚   â€¢ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ metadata['source']                â”‚
â”‚   â€¢ Ğ¤Ğ°Ğ¹Ğ» Ğ±Ñ‹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹           â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

# FileNotFoundError
$ semantic reanalyze doc-deleted --force
â•­â”€ âŒ ĞÑˆĞ¸Ğ±ĞºĞ° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ âŒ Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: /path/to/audio.mp3             â”‚
â”‚                                                   â”‚
â”‚ ĞœĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ» Ğ±Ñ‹Ğ» ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹.        â”‚
â”‚ Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» Ğ¸Ğ»Ğ¸ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚:           â”‚
â”‚   semantic delete doc-deleted                     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

---

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ° Ğ´Ğ»Ñ Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°

```bash
# Ğ’ semantic.toml
[media.prompts]
audio_custom_instructions = """
Extract:
- Medications and dosages
- Contraindications
- Key medical terms
Format as structured list.
"""

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğº ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¼Ñƒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñƒ
semantic reanalyze doc-lecture-01 --force
```

### 2. Ğ­ĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚ Ñ chunk sizes

```bash
# Ğ’ semantic.toml
[media.chunk_sizes]
transcript_chunk_size = 1200  # Ğ‘Ñ‹Ğ»Ğ¾ 2000

# ĞŸĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ chunks Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ¾Ğ¼
semantic reanalyze doc-podcast-42 --force
```

### 3. Ad-hoc Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ config

```bash
semantic reanalyze doc-tutorial-05 \
  --prompt "Focus on code blocks and syntax highlighting" \
  --force
```

### 4. Batch reanalyze Ğ² shell-ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğµ

```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ°ÑƒĞ´Ğ¸Ğ¾-Ğ»ĞµĞºÑ†Ğ¸Ğ¸ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼
for doc_id in $(semantic search "lecture" --type fts --json | jq -r '.[].id'); do
  semantic reanalyze "$doc_id" --force
  echo "âœ… Reanalyzed: $doc_id"
done
```

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² CLI App

```python
# semantic_core/cli/app.py
from semantic_core.cli.commands.reanalyze import reanalyze as reanalyze_cmd

app.command(
    name="reanalyze",
    help="ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°Ğ¼Ğ¸"
)(reanalyze_cmd)
```

### Delegation Ğº SemanticCore

```python
# semantic_core/cli/commands/reanalyze.py
def reanalyze(document_id: str, prompt: Optional[str] = None, ...):
    core = get_cli_context().get_core()
    
    # ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ (ĞµÑĞ»Ğ¸ Ğ½Ğµ --force)
    if not force:
        confirmed = typer.confirm("Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ reanalyze?")
        if not confirmed:
            raise typer.Exit(0)
    
    # Ğ”ĞµĞ»ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
    document = core.reanalyze(document_id, custom_instructions=prompt)
    
    # UI feedback
    console.print(Panel("âœ… Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½!", ...))
```

### MediaService Integration Ğ´Ğ»Ñ `--show-details`

```python
if show_details:
    media_service = MediaService(
        image_analyzer=core.image_analyzer,
        audio_analyzer=core.audio_analyzer,
        video_analyzer=core.video_analyzer,
        splitter=core.splitter,
        store=core.store,
        config=core.config,
    )
    details = media_service.get_media_details(document_id)
    
    # Rich UI: Panels, Tables, Preview
    console.print(Panel(details.summary, title="ğŸ“ Summary"))
    # ... transcript, OCR, timeline
```

---

## Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

**11 unit-Ñ‚ĞµÑÑ‚Ğ¾Ğ² (100% coverage):**

| Ğ¢ĞµÑÑ‚ | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ |
|------|-----------|
| `test_reanalyze_help` | Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ |
| `test_reanalyze_requires_confirmation_by_default` | Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ (Ğ¾Ñ‚ĞºĞ°Ğ·) |
| `test_reanalyze_success_with_force` | Ğ£ÑĞ¿ĞµÑ… Ñ `--force` |
| `test_reanalyze_success_with_confirmation` | Ğ£ÑĞ¿ĞµÑ… Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ |
| `test_reanalyze_with_custom_prompt` | ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° `--prompt` |
| `test_reanalyze_document_not_found` | `DoesNotExist` error |
| `test_reanalyze_validation_error` | `ValueError` (Ğ½Ğµ Ğ¼ĞµĞ´Ğ¸Ğ°-Ñ„Ğ°Ğ¹Ğ») |
| `test_reanalyze_file_not_found` | `FileNotFoundError` |
| `test_reanalyze_show_details` | `--show-details` + MediaService integration |
| `test_reanalyze_unexpected_error` | ĞĞ±Ñ‰Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº |
| `test_show_details_handles_errors` | Graceful degradation Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ… MediaService |

**Execution:** `0.12s` (Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€Ñ mock)

---

## Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ğ¸

### 1. Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ (Interactive Confirmation)

âŒ **Ğ‘Ğ•Ğ— Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ:**

```bash
semantic reanalyze doc-123  # Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° â†’ Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```

âœ… **Ğ¡ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼:**

```bash
semantic reanalyze doc-123
âš ï¸  Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ: Ğ‘ÑƒĞ´ÑƒÑ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ñ‹ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ chunks
Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ reanalyze? [y/n]: _  # â† Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ÑÑ‚Ğ¸
```

### 2. Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (`--force`)

```bash
# CI/CD Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½
for doc in $(cat reanalyze_queue.txt); do
  semantic reanalyze "$doc" --force  # â† Ğ‘ĞµĞ· Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ†Ğ¸Ğ¸
done
```

### 3. ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ (`--show-details`)

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ reanalyze:

- Summary (ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
- Transcript (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ)
- OCR Text (Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚)
- Timeline (Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚Ğ°Ğ¹Ğ¼ĞºĞ¾Ğ´Ğ°Ğ¼)

### 4. ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

Ğ’ÑĞµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ñ‹ Ñ **Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğ¼Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑĞ¼Ğ¸** Ğ¸ **exit code 1**:

- DoesNotExist â†’ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° `semantic search`
- ValueError â†’ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½
- FileNotFoundError â†’ Ğ¿Ğ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ° Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ/ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
- Exception â†’ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ

---

## Ğ˜Ñ‚Ğ¾Ğ³Ğ¸ Phase 14.3.4

```
11 unit-Ñ‚ĞµÑÑ‚Ğ¾Ğ² (100% passing)
1 CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° (semantic reanalyze)
3 Ñ„Ğ»Ğ°Ğ³Ğ° (--prompt, --show-details, --force)
4 Ñ‚Ğ¸Ğ¿Ğ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº (DoesNotExist, ValueError, FileNotFoundError, Exception)
Rich UI (Panels, Tables, Spinners, Color coding)
âœ… Phase 14.3.4 â€” COMPLETED!
```

**Commit:** `8acfc89`
