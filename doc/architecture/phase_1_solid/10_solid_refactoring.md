# üèóÔ∏è SOLID –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –æ—Ç –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ

> –ö–∞–∫ –º—ã —Ä–∞–∑–¥–µ–ª–∏–ª–∏ –∫–æ–¥ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–ª–æ–∏

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞: –≤—Å—ë —Å–≤—è–∑–∞–Ω–æ –Ω–∞–ø—Ä—è–º—É—é

–ü—Ä–µ–¥—Å—Ç–∞–≤—å: —Ç—ã –Ω–∞–ø–∏—Å–∞–ª —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø. –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç, Gemini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, SQLite —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ. –í—Å—ë –æ—Ç–ª–∏—á–Ω–æ!

–ù–æ –ø–æ—Ç–æ–º –ø–æ–Ω–∏–º–∞–µ—à—å:

- –•–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å OpenAI –≤–º–µ—Å—Ç–æ Gemini ‚Üí **–Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–ª–æ–≤–∏–Ω—É –∫–æ–¥–∞**
- –†–µ—à–∏–ª –ø–µ—Ä–µ–π—Ç–∏ —Å SQLite –Ω–∞ PostgreSQL ‚Üí **–ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ë–î**
- –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API ‚Üí **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –≤—Å—ë –∑–∞–≤—è–∑–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Gemini**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–∞–º–µ—Ä—Ç–≤–æ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º.

```
Note –º–æ–¥–µ–ª—å ‚Üí –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ‚Üí EmbeddingGenerator (Gemini)
                                   ‚Üí database.py (SQLite)
                                   ‚Üí HybridSearchMixin (Peewee ORM)
```

–ò–∑–º–µ–Ω–∏—Ç—å —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ = —Å–ª–æ–º–∞—Ç—å –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ!

---

## üí° –†–µ—à–µ–Ω–∏–µ: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

–ú—ã —Ä–∞–∑–±–∏–ª–∏ —Å–∏—Å—Ç–µ–º—É –Ω–∞ **4 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–ª–æ—è**, –≥–¥–µ –∫–∞–∂–¥—ã–π –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ —Å–≤–æ–∏—Ö –∑–∞–¥–∞—á–∞—Ö:

```mermaid
graph TB
    A[Domain Layer<br/>–ß–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ] 
    B[Interfaces Layer<br/>–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã]
    C[Infrastructure Layer<br/>–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏]
    D[Pipeline Layer<br/>–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä]
    
    D --> B
    B --> C
    C -.–∏—Å–ø–æ–ª—å–∑—É—é—Ç.-> A
    
    style A fill:#34a853,color:#fff
    style B fill:#4285f4,color:#fff
    style C fill:#fbbc04,color:#333
    style D fill:#ea4335,color:#fff
```

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –°–ª–æ–∏ –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é!

---

## üì¶ –°–ª–æ–π 1: Domain (—á—Ç–æ —Ö—Ä–∞–Ω–∏–º)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ª–æ–π ‚Äî **—á–∏—Å—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö**. –ù–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –ë–î –∏–ª–∏ API!

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–†–∞–Ω—å—à–µ —É –Ω–∞—Å –±—ã–ª–∏ ORM –º–æ–¥–µ–ª–∏:

```python
class Note(Model):  # ‚Üê –ü—Ä–∏–≤—è–∑–∫–∞ –∫ Peewee!
    title = CharField()
    content = TextField()
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–∫–æ–π –æ–±—ä–µ–∫—Ç –Ω–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å –∏–∑ API (Peewee-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π), –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—ã–µ dataclass:

- `Document` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (title, content, metadata)
- `Chunk` ‚Äî —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ (text, index, embedding)
- `SearchResult` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ (document, score, match_type)

–¢–µ–ø–µ—Ä—å —ç—Ç–∏ –æ–±—ä–µ–∫—Ç—ã –º–æ–∂–Ω–æ:
- ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ JSON
- ‚úÖ –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ë–î
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –ª—é–±–æ–π ORM (–∏–ª–∏ –≤–æ–æ–±—â–µ –±–µ–∑ –Ω–µ—ë)

---

## üìã –°–ª–æ–π 2: Interfaces (–∫–∞–∫ –æ–±—â–∞—Ç—å—Å—è)

–≠—Ç–æ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä—ã–º –¥–æ–ª–∂–Ω—ã –ø–æ–¥—á–∏–Ω—è—Ç—å—Å—è –≤—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### –ó–∞—á–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã?

–î–æ–ø—É—Å—Ç–∏–º, —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–º–µ–Ω—è—Ç—å Gemini –Ω–∞ OpenAI. –ë–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:

```python
# –í 20 –º–µ—Å—Ç–∞—Ö –∫–æ–¥–∞
embedder = GeminiEmbedder(api_key="...")
vector = embedder.embed_document(text)  # ‚Üê –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –º–µ—Ç–æ–¥!
```

–¢–µ–ø–µ—Ä—å —Ç–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –í–°–ï –º–µ—Å—Ç–∞ –∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å. –ê –µ—Å–ª–∏ –º–µ—Ç–æ–¥—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É? –í—Å—ë —Å–ª–æ–º–∞–µ—Ç—Å—è!

**–° –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏:**

```python
class BaseEmbedder(ABC):
    @abstractmethod
    def embed_documents(self, texts: list[str]) -> list[np.ndarray]:
        """–õ—é–±–∞—è AI-–º–æ–¥–µ–ª—å –û–ë–Ø–ó–ê–ù–ê —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥"""
```

–¢–µ–ø–µ—Ä—å **–∏ Gemini, –∏ OpenAI** –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:

```python
gemini = GeminiEmbedder(...)      # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
openai = OpenAIEmbedder(...)      # ‚úÖ –¢–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
fake = FakeEmbedder(...)          # ‚úÖ –î–ª—è —Ç–µ—Å—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

–ö–æ–¥ –ø–∞–π–ø–ª–∞–π–Ω–∞ **–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è** ‚Äî –µ–º—É –≤—Å—ë —Ä–∞–≤–Ω–æ, –∫—Ç–æ –∏–º–µ–Ω–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã!

### –ù–∞—à–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

1. **BaseEmbedder** ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã (Gemini, OpenAI, Local Models)
2. **BaseVectorStore** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∏ –∏—â–µ—Ç (SQLite, PostgreSQL, Qdrant)
3. **BaseSplitter** ‚Äî —Ä–µ–∂–µ—Ç —Ç–µ–∫—Å—Ç (Simple, Markdown, Code-aware)
4. **BaseContextStrategy** ‚Äî –æ–±–æ–≥–∞—â–∞–µ—Ç —á–∞–Ω–∫–∏ (Basic, Hierarchical, No-context)

---

## ‚öôÔ∏è –°–ª–æ–π 3: Infrastructure (–∫–∞–∫ –¥–µ–ª–∞–µ–º)

–ó–¥–µ—Å—å –∂–∏–≤—É—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã** –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º: Gemini API, SQLite, Peewee ORM.

### –ü—Ä–∏–º–µ—Ä: GeminiEmbedder

–†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BaseEmbedder`, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Google API:

**–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç Gemini API
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º task_type
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏

**–ß—Ç–æ –æ–Ω –ù–ï –∑–Ω–∞–µ—Ç:**
- –ö–∞–∫ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ (—ç—Ç–æ –∑–∞–¥–∞—á–∞ Store)
- –ö–∞–∫ —Ä–µ–∂–µ—Ç—Å—è —Ç–µ–∫—Å—Ç (—ç—Ç–æ –∑–∞–¥–∞—á–∞ Splitter)
- –ö—Ç–æ –µ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç (—ç—Ç–æ –∑–∞–¥–∞—á–∞ Pipeline)

### –ü—Ä–∏–º–µ—Ä: PeeweeVectorStore

–†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BaseVectorStore`, –Ω–æ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å SQLite:

**–ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:**
- –°–æ–∑–¥–∞—ë—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ ORM –º–æ–¥–µ–ª–∏ (`DocumentModel`, `ChunkModel`)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç vec0 –∏ fts5 —Ç–∞–±–ª–∏—Ü—ã
- –í—ã–ø–æ–ª–Ω—è–µ—Ç SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ Domain DTO

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** –°–Ω–∞—Ä—É–∂–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏–¥–∏—Ç Peewee! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `Document` –∏ `Chunk`, –∞ –Ω–µ —Å `DocumentModel`.

---

## üéº –°–ª–æ–π 4: Pipeline (–∫—Ç–æ –∫–æ–º–∞–Ω–¥—É–µ—Ç)

–≠—Ç–æ **–¥–∏—Ä–∏–∂—ë—Ä –æ—Ä–∫–µ—Å—Ç—Ä–∞** ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–º–µ—Å—Ç–µ.

### Dependency Injection

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏:

```python
# ‚ùå –ü–õ–û–•–û
class SemanticCore:
    def __init__(self):
        self.embedder = GeminiEmbedder()  # –ñ—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç–æ!
```

–ú—ã **–ø–µ—Ä–µ–¥–∞—ë–º –∏—Ö –∏–∑–≤–Ω–µ**:

```python
# ‚úÖ –•–û–†–û–®–û
class SemanticCore:
    def __init__(
        self,
        embedder: BaseEmbedder,    # ‚Üê –õ—é–±–æ–π!
        store: BaseVectorStore,     # ‚Üê –õ—é–±–æ–π!
        ...
    ):
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Gemini –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FakeEmbedder –≤ —Ç–µ—Å—Ç–∞—Ö
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ OpenAI –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```mermaid
sequenceDiagram
    participant User
    participant Pipeline
    participant Splitter
    participant Context
    participant Embedder
    participant Store
    
    User->>Pipeline: ingest(document)
    Pipeline->>Splitter: –ù–∞—Ä–µ–∂—å –Ω–∞ —á–∞–Ω–∫–∏
    Splitter-->>Pipeline: chunks (–±–µ–∑ –≤–µ–∫—Ç–æ—Ä–æ–≤)
    
    Pipeline->>Context: –î–æ–±–∞–≤—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
    Context-->>Pipeline: "–ó–∞–≥–æ–ª–æ–≤–æ–∫: ...\n\n–¢–µ–∫—Å—Ç"
    
    Pipeline->>Embedder: –í–µ–∫—Ç–æ—Ä–∏–∑—É–π
    Embedder-->>Pipeline: embeddings
    
    Pipeline->>Store: –°–æ—Ö—Ä–∞–Ω–∏
    Store-->>User: –ì–æ—Ç–æ–≤–æ!
```

**–ö–∞–∂–¥—ã–π –¥–µ–ª–∞–µ—Ç —Å–≤–æ—ë, –Ω–∏–∫—Ç–æ –Ω–µ –ª–µ–∑–µ—Ç –≤ —á—É–∂–∏–µ –¥–µ–ª–∞!**

---

## ‚úÖ –ß—Ç–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏

### 1. –ì–∏–±–∫–æ—Å—Ç—å

–•–æ—á–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å Gemini –Ω–∞ OpenAI?

```python
# –ë—ã–ª–æ
core = SemanticCore(embedder=GeminiEmbedder(...), ...)

# –°—Ç–∞–ª–æ
core = SemanticCore(embedder=OpenAIEmbedder(...), ...)
```

–í—Å—ë! –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ **–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è**.

### 2. –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

–•–æ—á–µ—à—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –¥–µ–Ω–µ–≥ –Ω–∞ API?

```python
class FakeEmbedder(BaseEmbedder):
    def embed_documents(self, texts):
        return [random.rand(768) for _ in texts]

core = SemanticCore(embedder=FakeEmbedder(), ...)  # –ë–µ—Å–ø–ª–∞—Ç–Ω–æ!
```

### 3. –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å

–•–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ?

```python
# –ö–æ–ø–∏—Ä—É–µ—à—å semantic_core/ —Ü–µ–ª–∏–∫–æ–º
# –ü–æ–¥–∫–ª—é—á–∞–µ—à—å —Å–≤–æ–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
embedder = MyCustomEmbedder()
store = MyRedisStore()
core = SemanticCore(embedder=embedder, store=store, ...)
```

–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É!

---

## üéì SOLID –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

### Single Responsibility (–û–¥–Ω–∞ –∑–∞–¥–∞—á–∞)

- `SimpleSplitter` ‚Äî **—Ç–æ–ª—å–∫–æ** —Ä–µ–∂–µ—Ç —Ç–µ–∫—Å—Ç
- `GeminiEmbedder` ‚Äî **—Ç–æ–ª—å–∫–æ** –≤–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç
- `PeeweeVectorStore` ‚Äî **—Ç–æ–ª—å–∫–æ** —Ö—Ä–∞–Ω–∏—Ç

–ù–∏–∫—Ç–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —á—É–∂—É—é —Ä–∞–±–æ—Ç—É!

### Open/Closed (–û—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–ø–ª–∏—Ç—Ç–µ—Ä:

```python
class MarkdownSplitter(BaseSplitter):
    def split(self, document):
        # –†–µ–∂–µ–º –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º...
```

**–ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º** –≤ Pipeline –∏–ª–∏ Store!

### Liskov Substitution (–í–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ—Å—Ç—å)

–õ—é–±–æ–π –∫–ª–∞—Å—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π `BaseEmbedder`, —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:

```python
def process(embedder: BaseEmbedder):  # ‚Üê –ù–µ–≤–∞–∂–Ω–æ, –∫—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ
    vectors = embedder.embed_documents(texts)
```

### Interface Segregation (–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)

`BaseEmbedder` –∏–º–µ–µ—Ç –≤—Å–µ–≥–æ 2 –º–µ—Ç–æ–¥–∞ ‚Äî –±–æ–ª—å—à–µ –∏ –Ω–µ –Ω—É–∂–Ω–æ!

### Dependency Inversion (–ó–∞–≤–∏—Å–∏–º –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π)

Pipeline –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `BaseEmbedder`, –∞ –Ω–µ –æ—Ç `GeminiEmbedder` –Ω–∞–ø—Ä—è–º—É—é.

---

## üîÆ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî **—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç** –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–∞–∑:

- **–§–∞–∑–∞ 2:** Markdown –ø–∞—Ä—Å–∏–Ω–≥ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º
- **–§–∞–∑–∞ 3:** Async batch processing
- **–§–∞–∑–∞ 4:** –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ)

–ö–∞–∂–¥–∞—è —Ñ–∞–∑–∞ –ø—Ä–æ—Å—Ç–æ **–¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –Ω–µ –ª–æ–º–∞—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥!

---

**‚Üê [–ù–∞–∑–∞–¥: Parent-Child Retrieval](09_parent_child_retrieval.md)**

**‚Üë [–ö –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](00_overview.md)**

**‚Üí –î–∞–ª—å—à–µ: –§–∞–∑–∞ 2 (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞)** üöÄ
