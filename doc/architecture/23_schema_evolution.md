# üîÑ Schema Evolution: –ú–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ downtime

> –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –ë–î –±–µ–∑ breaking changes

---

## üìå –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**Schema Evolution** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, –∫–æ–ª–æ–Ω–æ–∫, –∏–Ω–¥–µ–∫—Å–æ–≤) —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã **—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å**.

–ü—Ä–æ—Å—Ç–∞—è –∏–¥–µ—è: **–Ω–æ–≤—ã–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, —Å—Ç–∞—Ä—ã–µ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã**.

---

## üéØ –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞: Breaking changes –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–∏–ª—Å—è —Å Phase 4 –Ω–∞ Phase 5:

**Phase 4 —Å—Ö–µ–º–∞:**

```sql
CREATE TABLE chunks (
    id INTEGER PRIMARY KEY,
    content TEXT NOT NULL,
    chunk_type TEXT,
    language TEXT
);
```

**Phase 5 —Å—Ö–µ–º–∞ (naive –ø–æ–¥—Ö–æ–¥):**

```sql
-- ‚ùå –ü–õ–û–•–û: –î—Ä–æ–ø —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã
DROP TABLE chunks;

CREATE TABLE chunks (
    id INTEGER PRIMARY KEY,
    content TEXT NOT NULL,
    chunk_type TEXT,
    language TEXT,
    embedding_status TEXT NOT NULL,  -- –ù–æ–≤–æ–µ –ø–æ–ª–µ!
    batch_job_id INTEGER
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:**

- ‚ùå –í—Å–µ –¥–∞–Ω–Ω—ã–µ **–ø–æ—Ç–µ—Ä—è–Ω—ã** (DROP TABLE)
- ‚ùå –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **—Å–ª–æ–º–∞–µ—Ç—Å—è** (embedding_status –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω **–≤—Ä—É—á–Ω—É—é** –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î

**–≠—Ç–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è production –±–∏–±–ª–∏–æ—Ç–µ–∫–∏!**

---

**–†–µ—à–µ–Ω–∏–µ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å ALTER TABLE**

```sql
-- ‚úÖ –•–û–†–û–®–û: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ
ALTER TABLE chunks ADD COLUMN embedding_status TEXT DEFAULT 'READY';
ALTER TABLE chunks ADD COLUMN batch_job_id INTEGER;
ALTER TABLE chunks ADD COLUMN error_message TEXT;

-- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –±–∞—Ç—á-–∑–∞–¥–∞–Ω–∏–π
CREATE TABLE IF NOT EXISTS batch_jobs (...);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –î–∞–Ω–Ω—ã–µ **—Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã**
- ‚úÖ –°—Ç–∞—Ä—ã–µ —á–∞–Ω–∫–∏ –ø–æ–ª—É—á–∞—é—Ç `embedding_status='READY'` (—É–∂–µ –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã)
- ‚úÖ –ù–æ–≤—ã–µ —á–∞–Ω–∫–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å `PENDING` –∏–ª–∏ `FAILED`
- ‚úÖ **–ù—É–ª–µ–≤–∞—è —Ä—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ú–µ—Ö–∞–Ω–∏–∑–º ensure_schema_compatibility()

```mermaid
graph TB
    A[–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è] --> B{–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã}
    B -->|–ù–æ–≤–∞—è –ë–î| C[–°–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã]
    B -->|–°—Ç–∞—Ä–∞—è –ë–î| D{–ï—Å—Ç—å embedding_status?}
    
    D -->|–ù–µ—Ç| E[ALTER TABLE: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏]
    D -->|–î–∞| F[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é]
    
    E --> G{–ï—Å—Ç—å batch_jobs?}
    G -->|–ù–µ—Ç| H[CREATE TABLE batch_jobs]
    G -->|–î–∞| I[–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å]
    
    C --> J[–ì–æ—Ç–æ–≤–æ]
    F --> J
    H --> J
    I --> J
    
    style E fill:#99ff99
    style H fill:#99ff99
```

### –ê–ª–≥–æ—Ä–∏—Ç–º –º–∏–≥—Ä–∞—Ü–∏–∏

**–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–ª–æ–Ω–∫–∏**

```sql
PRAGMA table_info(chunks);
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫. –ò—â–µ–º `embedding_status` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.

**–®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)**

```sql
ALTER TABLE chunks ADD COLUMN embedding_status TEXT DEFAULT 'READY';
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** `DEFAULT 'READY'` ‚Äî **–≤—Å–µ —Å—Ç–∞—Ä—ã–µ —á–∞–Ω–∫–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å `READY` (–æ–Ω–∏ —É–∂–µ –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Phase 4).

**–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã batch_jobs**

```sql
CREATE TABLE IF NOT EXISTS batch_jobs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    google_job_id TEXT UNIQUE,
    status TEXT NOT NULL,
    total_chunks INTEGER,
    completed_chunks INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

`IF NOT EXISTS` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –Ω–µ —É–ø–∞–¥—ë—Ç –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞.

---

## üìä –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã

### Phase 4 ‚Üí Phase 5 –º–∏–≥—Ä–∞—Ü–∏—è

| –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –¢–∏–ø | Backward compatible? |
|-----------|-----|----------------------|
| `chunks.embedding_status` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ | ‚úÖ –î–∞ (—Å DEFAULT) |
| `chunks.batch_job_id` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ FK | ‚úÖ –î–∞ (nullable) |
| `chunks.error_message` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ | ‚úÖ –î–∞ (nullable) |
| `batch_jobs` —Ç–∞–±–ª–∏—Ü–∞ | –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ | ‚úÖ –î–∞ (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è) |

**–ö—Ä–∏—Ç–µ—Ä–∏–π backward compatibility:**

- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** nullable –∫–æ–ª–æ–Ω–æ–∫ ‚Äî –û–ö
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** –∫–æ–ª–æ–Ω–æ–∫ —Å DEFAULT ‚Äî –û–ö
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ** –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü ‚Äî –û–ö
- ‚ùå **–£–¥–∞–ª–µ–Ω–∏–µ** –∫–æ–ª–æ–Ω–æ–∫ ‚Äî BREAKING CHANGE
- ‚ùå **–ò–∑–º–µ–Ω–µ–Ω–∏–µ** —Ç–∏–ø–∞ –∫–æ–ª–æ–Ω–∫–∏ ‚Äî BREAKING CHANGE

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã

### 1. SQLite –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ ALTER TABLE

**SQLite –Ω–µ —É–º–µ–µ—Ç:**

- ‚ùå –î–æ–±–∞–≤–∏—Ç—å NOT NULL –∫–æ–ª–æ–Ω–∫—É –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- ‚ùå –î–æ–±–∞–≤–∏—Ç—å FOREIGN KEY –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ
- ‚ùå –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø –∫–æ–ª–æ–Ω–∫–∏ (ALTER COLUMN)
- ‚ùå –£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É (–¥–æ SQLite 3.35.0)

**Workaround –¥–ª—è NOT NULL:**

–ò—Å–ø–æ–ª—å–∑—É–π DEFAULT:

```sql
-- ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢
ALTER TABLE chunks ADD COLUMN embedding_status TEXT NOT NULL;

-- ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
ALTER TABLE chunks ADD COLUMN embedding_status TEXT DEFAULT 'READY';
-- –ü–æ—Ç–æ–º –¥–æ–±–∞–≤—å CHECK constraint –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫
```

---

### 2. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß—Ç–æ –µ—Å–ª–∏ `ensure_schema_compatibility()` –≤—ã–∑–≤–∞–Ω –¥–≤–∞–∂–¥—ã?

**–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã**:

```sql
-- –í—ã–∑–æ–≤ 1: –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª–æ–Ω–∫—É
ALTER TABLE chunks ADD COLUMN embedding_status TEXT DEFAULT 'READY';

-- –í—ã–∑–æ–≤ 2: –ù–ï –£–ü–ê–î–Å–¢ (–Ω–æ –∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç)
-- SQLite –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É "duplicate column name", –∫–æ—Ç–æ—Ä—É—é –º—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```python
try:
    db.execute_sql("ALTER TABLE chunks ADD COLUMN embedding_status TEXT DEFAULT 'READY'")
except OperationalError as e:
    if "duplicate column" in str(e):
        pass  # –ö–æ–ª–æ–Ω–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤—Å—ë –û–ö
    else:
        raise  # –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞, –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º
```

---

### 3. Rollback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ Phase 5 —Å–ª–æ–º–∞–ª–∞—Å—å –∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ Phase 4?

**–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å:** Phase 4 –∫–æ–¥ **–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å** —Å Phase 5 —Å—Ö–µ–º–æ–π!

```python
# Phase 4 –∫–æ–¥
chunk = ChunkModel.create(
    content="text",
    chunk_type="text",
    language=None
)
# embedding_status –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç DEFAULT 'READY'
# batch_job_id –æ—Å—Ç–∞–Ω–µ—Ç—Å—è NULL
```

**–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- Phase 4 –Ω–µ –∑–Ω–∞–µ—Ç –æ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∏—Ö
- SQLite –∑–∞–ø–æ–ª–Ω—è–µ—Ç DEFAULT –∑–Ω–∞—á–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ö–∞–∫ —Å—Ç–∞—Ä—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω —Å –Ω–æ–≤–æ–π SIM-–∫–∞—Ä—Ç–æ–π ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (5G), –Ω–æ –∑–≤–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç.

---

### 4. –ú–∏–≥—Ä–∞—Ü–∏—è vs Alembic/Django ORM

**–í–æ–ø—Ä–æ—Å:** –ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π?

**–û—Ç–≤–µ—Ç:**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Alembic:**

- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (001_initial, 002_add_batching)
- ‚úÖ Rollback —á–µ—Ä–µ–∑ `alembic downgrade`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**

- ‚ùå –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `alembic` (–ª–∏—à–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω **–≤—Ä—É—á–Ω—É—é** –≤—ã–∑—ã–≤–∞—Ç—å `alembic upgrade head`
- ‚ùå –£—Å–ª–æ–∂–Ω—è–µ—Ç onboarding

**–ù–∞—à –ø–æ–¥—Ö–æ–¥:**

- ‚úÖ **Zero-config:** –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏–ª –±–∏–±–ª–∏–æ—Ç–µ–∫—É ‚Üí –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω –ø—Ä–æ—Å—Ç—ã–º–∏ ALTER TABLE (–Ω–æ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è Phase 1-5)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö deployment –∏—Å–ø–æ–ª—å–∑—É–π Alembic. –î–ª—è rapid prototyping ‚Äî `ensure_schema_compatibility()`.

---

## üéì –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å –º–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã–π –¥–æ–º:

**Phase 4** ‚Äî –¥–æ–º —Å 5 —ç—Ç–∞–∂–∞–º–∏, –≤ –∫–∞–∂–¥–æ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ:

- –°–ø–∞–ª—å–Ω—è (content)
- –ö—É—Ö–Ω—è (chunk_type)
- –í–∞–Ω–Ω–∞—è (language)

**Phase 5** ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü —Ä–µ—à–∏–ª **–¥–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∫–æ–Ω—ã** (embedding_status):

**‚ùå –ü–õ–û–•–û–ô –ø–æ–¥—Ö–æ–¥:**

- –°–Ω–µ—Å—Ç–∏ –¥–æ–º, –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –Ω–æ–≤—ã–π —Å –±–∞–ª–∫–æ–Ω–∞–º–∏
- –ñ–∏–ª—å—Ü—ã (–¥–∞–Ω–Ω—ã–µ) –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —É–ª–∏—Ü–µ

**‚úÖ –•–û–†–û–®–ò–ô –ø–æ–¥—Ö–æ–¥:**

- –ü—Ä–∏—Å—Ç—Ä–æ–∏—Ç—å –±–∞–ª–∫–æ–Ω—ã –∫ **—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–≤–∞—Ä—Ç–∏—Ä–∞–º**
- –°—Ç–∞—Ä—ã–µ –∂–∏–ª—å—Ü—ã (Phase 4 —á–∞–Ω–∫–∏) –ø–æ–ª—É—á–∞—é—Ç –±–∞–ª–∫–æ–Ω —Å DEFAULT –º–µ–±–µ–ª—å—é
- –ù–æ–≤—ã–µ –∂–∏–ª—å—Ü—ã (Phase 5 —á–∞–Ω–∫–∏) –º–æ–≥—É—Ç –æ–±—É—Å—Ç—Ä–æ–∏—Ç—å –±–∞–ª–∫–æ–Ω –ø–æ-—Å–≤–æ–µ–º—É

**–ù–∏–∫—Ç–æ –Ω–µ –ø–µ—Ä–µ–µ–∑–∂–∞–µ—Ç, downtime = 0!**

---

## üîó –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Ä–∏–∏

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –ø—Ä–æ—à—ë–ª –≤—Å—é —Å–µ—Ä–∏—é **Async Batching & Cost Optimization**:

1. ‚úÖ [19. API Key Management](19_api_key_management.md) ‚Äî –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–ª–ª–∏–Ω–≥–∞
2. ‚úÖ [20. Async Processing](20_async_processing.md) ‚Äî –û—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫ –æ—á–µ—Ä–µ–¥–∏
3. ‚úÖ [21. Batch API Economics](21_batch_api_economics.md) ‚Äî 50% —ç–∫–æ–Ω–æ–º–∏—è
4. ‚úÖ [22. BatchManager](22_batch_manager.md) ‚Äî –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
5. ‚úÖ [23. Schema Evolution](23_schema_evolution.md) ‚Äî –ú–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ downtime

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

- üìö –ò–∑—É—á–∏ [—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã Phase 5](../../ideas/phase_5/) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- üî¨ –ó–∞–ø—É—Å—Ç–∏ [example_phase5.py](../../../example_phase5.py) –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏
- üß™ –ò–∑—É—á–∏ [—Ç–µ—Å—Ç—ã Phase 5](../../../tests/) –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**‚Üê [–ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](00_overview.md)**
